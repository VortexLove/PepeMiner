<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PepeBlackJack | Casino Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #00ff2a; --bg-dark: #05080a; --bg-panel: #0b1016; }
        body { background-color: var(--bg-dark); color: white; font-family: 'Inter', sans-serif; overflow: hidden; }
        
        /* Layout Grid */
        .app-layout { display: grid; grid-template-columns: 260px 1fr; height: 100vh; }
        
        /* Sidebar */
        .sidebar { background: rgba(11, 16, 22, 0.95); border-right: 1px solid #1f2937; display: flex; flex-direction: column; padding: 20px; z-index: 20; }
        
        /* Header */
        .top-bar { height: 70px; display: flex; align-items: center; justify-content: flex-end; padding: 0 30px; border-bottom: 1px solid #1f2937; background: #05080a; }

        /* EL TRUCO: El Game Frame */
        .game-viewport {
            width: 100%;
            height: calc(100vh - 70px); /* Restar altura del header */
            border: none;
            display: block;
            background: radial-gradient(circle at 50% 50%, #1a2530 0%, #05080a 100%);
        }

        /* Mobile */
        @media (max-width: 1024px) {
            .app-layout { grid-template-columns: 1fr; }
            .sidebar { display: none; } /* Aqu铆 ir铆a tu l贸gica de toggle men煤 m贸vil */
        }
    </style>
</head>
<body>

    <div class="app-layout">
        <!-- 1. SIDEBAR (Fijo) -->
        <nav class="sidebar">
            <div class="flex items-center gap-3 mb-10 text-2xl font-bold font-mono">
                 PepeBJ
            </div>
            
            <div class="space-y-2">
                <!-- Botones que cargan juegos -->
                <button onclick="loadGame('welcome.html')" class="w-full text-left p-3 rounded hover:bg-white/5 text-gray-400 hover:text-white transition">
                    <i class="fas fa-home w-6"></i> Home
                </button>
                <button onclick="loadGame('Games/plinko.html')" class="w-full text-left p-3 rounded hover:bg-white/5 text-gray-400 hover:text-white transition">
                    <i class="fas fa-caret-down w-6 text-green-500"></i> Plinko
                </button>
                <button onclick="loadGame('Games/blackjack.html')" class="w-full text-left p-3 rounded hover:bg-white/5 text-gray-400 hover:text-white transition">
                    <i class="fas fa-heart w-6 text-red-500"></i> Blackjack
                </button>
            </div>
        </nav>

        <!-- 2. MAIN AREA -->
        <main class="flex flex-col h-full relative">
            
            <!-- Header (Fijo, siempre visible) -->
            <header class="top-bar">
                <div class="flex items-center gap-4">
                    <div class="bg-gray-800 px-4 py-2 rounded-lg border border-gray-700">
                        <span class="text-sm font-bold text-gray-400 uppercase mr-2">Balance</span>
                        <span id="globalBalance" class="text-lg font-bold text-[#00ff2a]">1,000.00</span>
                    </div>
                    <div class="w-10 h-10 rounded-full bg-green-900 border border-green-500"></div>
                </div>
            </header>

            <!-- 3. VENTANA DEL JUEGO (IFRAME) -->
            <!-- Aqu铆 es donde se carga el archivo externo -->
            <iframe id="gameFrame" class="game-viewport" src="welcome.html"></iframe>

        </main>
    </div>

    <script>
        // ESTADO GLOBAL
        let userBalance = 1000.00;

        // Funci贸n para cambiar de juego
        function loadGame(url) {
            const frame = document.getElementById('gameFrame');
            frame.src = url;
            
            // Cuando el juego cargue, le enviamos el saldo actual
            frame.onload = function() {
                frame.contentWindow.postMessage({ type: 'INIT_BALANCE', balance: userBalance }, '*');
            };
        }

        // ESCUCHAR MENSAJES DEL JUEGO (Hijo -> Padre)
        window.addEventListener('message', (event) => {
            const data = event.data;
            
            if (data.type === 'UPDATE_BALANCE') {
                // El juego nos dice: "El usuario apost贸" o "El usuario gan贸"
                // data.amount puede ser positivo (win) o negativo (bet)
                userBalance += data.amount;
                document.getElementById('globalBalance').innerText = userBalance.toLocaleString('en-US', {minimumFractionDigits: 2});
                
                // Le confirmamos el nuevo saldo al juego para que est茅 sincronizado
                const frame = document.getElementById('gameFrame');
                frame.contentWindow.postMessage({ type: 'SYNC_BALANCE', balance: userBalance }, '*');
            }
        });
    </script>
</body>
</html>
